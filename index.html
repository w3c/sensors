<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Generic Sensor API</title>
  <meta content="ED" name="w3c-status">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd; border-radius: .5em;
	  margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: medium;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
		border-bottom-width: 3px !important;
		margin-bottom: 0px !important;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li li { font-size:   85%;    }

	.toc > li             { margin: 1.5rem 0;    }
	.toc > li li          { margin: 0.3rem 0;    }
	.toc > li li li       { margin-left: 2rem;   }

	/* Section numbers in a column of their own */
	.toc .secno {
		float: left;
		width: 4rem;
		white-space: nowrap;
	}
	.toc > li li li li .secno {
		font-size: 85%;
	}
	.toc > li li li li li .secno {
		font-size: 100%;
	}

	:not(li) > .toc              { margin-left:  5rem; }
	.toc .secno                  { margin-left: -5rem; }
	.toc > li li li .secno       { margin-left: -7rem; }
	.toc > li li li li .secno    { margin-left: -9rem; }
	.toc > li li li li li .secno { margin-left: -11rem; }

	/* Tighten up indentation in narrow ToCs */
	@media (max-width: 30em) {
		:not(li) > .toc              { margin-left:  4rem; }
		.toc .secno                  { margin-left: -4rem; }
		.toc > li li li              { margin-left:  1rem; }
		.toc > li li li .secno       { margin-left: -5rem; }
		.toc > li li li li .secno    { margin-left: -6rem; }
		.toc > li li li li li .secno { margin-left: -7rem; }
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) :not(li) > .toc              { margin-left:  4rem; }
		body:not(.toc-inline) .toc .secno                  { margin-left: -4rem; }
		body:not(.toc-inline) .toc > li li li              { margin-left:  1rem; }
		body:not(.toc-inline) .toc > li li li .secno       { margin-left: -5rem; }
		body:not(.toc-inline) .toc > li li li li .secno    { margin-left: -6rem; }
		body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	body.toc-sidebar #toc :not(li) > .toc              { margin-left:  4rem; }
	body.toc-sidebar #toc .toc .secno                  { margin-left: -4rem; }
	body.toc-sidebar #toc .toc > li li li              { margin-left:  1rem; }
	body.toc-sidebar #toc .toc > li li li .secno       { margin-left: -5rem; }
	body.toc-sidebar #toc .toc > li li li li .secno    { margin-left: -6rem; }
	body.toc-sidebar #toc .toc > li li li li li .secno { margin-left: -7rem; }

	.toc li {
		clear: both;
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
<style>
    body {
      background: url("https://www.w3.org/StyleSheets/TR/logo-ED") top left no-repeat white;
      background-attachment: fixed;
    }
  </style>
  <meta content="Bikeshed version bbe9248eb5d0801cb5dd013b3254431d0a802f86" name="generator">
  <link href="https://www.w3.org/TR/generic-sensor/" rel="canonical">
<style>
    emu-val {
      font-weight: bold;
    }
</style>
<style>
    svg g.edge text {
        font-size: 8px;
    }

    svg g.node text {
        font-size: 10px;
    }
</style>
<style>
    #toc .current,
    #toc .current-parent {
      border-right-width: 3px;
      border-right-style: solid;
      border-right-color: #3980B5;
    }

    #toc .current {
      background: rgba(75%, 75%, 75%, .25);
      border-right-color: #054572;
    }
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: gray;
    color: white;
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: black;
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: #005a9c;
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel ul { padding: 0; }
        .dfn-panel li { list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
<style>/* style-syntax-highlighting */
pre.idl.highlight { color: #708090; }
.highlight:not(.idl) { background: hsl(24, 20%, 95%); }
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
.highlight .c { color: #708090 } /* Comment */
.highlight .k { color: #990055 } /* Keyword */
.highlight .l { color: #000000 } /* Literal */
.highlight .n { color: #0077aa } /* Name */
.highlight .o { color: #999999 } /* Operator */
.highlight .p { color: #999999 } /* Punctuation */
.highlight .cm { color: #708090 } /* Comment.Multiline */
.highlight .cp { color: #708090 } /* Comment.Preproc */
.highlight .c1 { color: #708090 } /* Comment.Single */
.highlight .cs { color: #708090 } /* Comment.Special */
.highlight .kc { color: #990055 } /* Keyword.Constant */
.highlight .kd { color: #990055 } /* Keyword.Declaration */
.highlight .kn { color: #990055 } /* Keyword.Namespace */
.highlight .kp { color: #990055 } /* Keyword.Pseudo */
.highlight .kr { color: #990055 } /* Keyword.Reserved */
.highlight .kt { color: #990055 } /* Keyword.Type */
.highlight .ld { color: #000000 } /* Literal.Date */
.highlight .m { color: #000000 } /* Literal.Number */
.highlight .s { color: #a67f59 } /* Literal.String */
.highlight .na { color: #0077aa } /* Name.Attribute */
.highlight .nc { color: #0077aa } /* Name.Class */
.highlight .no { color: #0077aa } /* Name.Constant */
.highlight .nd { color: #0077aa } /* Name.Decorator */
.highlight .ni { color: #0077aa } /* Name.Entity */
.highlight .ne { color: #0077aa } /* Name.Exception */
.highlight .nf { color: #0077aa } /* Name.Function */
.highlight .nl { color: #0077aa } /* Name.Label */
.highlight .nn { color: #0077aa } /* Name.Namespace */
.highlight .py { color: #0077aa } /* Name.Property */
.highlight .nt { color: #669900 } /* Name.Tag */
.highlight .nv { color: #222222 } /* Name.Variable */
.highlight .ow { color: #999999 } /* Operator.Word */
.highlight .mb { color: #000000 } /* Literal.Number.Bin */
.highlight .mf { color: #000000 } /* Literal.Number.Float */
.highlight .mh { color: #000000 } /* Literal.Number.Hex */
.highlight .mi { color: #000000 } /* Literal.Number.Integer */
.highlight .mo { color: #000000 } /* Literal.Number.Oct */
.highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
.highlight .sc { color: #a67f59 } /* Literal.String.Char */
.highlight .sd { color: #a67f59 } /* Literal.String.Doc */
.highlight .s2 { color: #a67f59 } /* Literal.String.Double */
.highlight .se { color: #a67f59 } /* Literal.String.Escape */
.highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
.highlight .si { color: #a67f59 } /* Literal.String.Interpol */
.highlight .sx { color: #a67f59 } /* Literal.String.Other */
.highlight .sr { color: #a67f59 } /* Literal.String.Regex */
.highlight .s1 { color: #a67f59 } /* Literal.String.Single */
.highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
.highlight .vc { color: #0077aa } /* Name.Variable.Class */
.highlight .vg { color: #0077aa } /* Name.Variable.Global */
.highlight .vi { color: #0077aa } /* Name.Variable.Instance */
.highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Generic Sensor API</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor’s Draft, <time class="dt-updated" datetime="2017-09-06">6 September 2017</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://w3c.github.io/sensors/">https://w3c.github.io/sensors/</a>
     <dt>Latest published version:
     <dd><a href="https://www.w3.org/TR/generic-sensor/">https://www.w3.org/TR/generic-sensor/</a>
     <dt>Previous Versions:
     <dd><a href="https://www.w3.org/TR/2017/WD-generic-sensor-20170530/" rel="prev">https://www.w3.org/TR/2017/WD-generic-sensor-20170530/</a>
     <dt>Feedback:
     <dd><span><a href="mailto:public-device-apis@w3.org?subject=%5Bgeneric-sensor%5D%20YOUR%20TOPIC%20HERE">public-device-apis@w3.org</a> with subject line “<kbd>[generic-sensor] <i data-lt="">… message topic …</i></kbd>” (<a href="https://lists.w3.org/Archives/Public/public-device-apis/" rel="discussion">archives</a>)</span>
     <dd><span><a href="https://github.com/w3c/sensors">GitHub</a> (<a href="https://github.com/w3c/sensors/issues/new">new issue</a>, <a href="https://github.com/w3c/sensors/milestone/2">level 1 issues</a>, <a href="https://github.com/w3c/sensors/issues">all issues</a>)</span>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard" data-editor-id="50572"><span class="p-name fn">Rick Waldron</span> (<span class="p-org org">JS Foundation</span>)
     <dd class="editor p-author h-card vcard" data-editor-id="78325"><a class="p-name fn u-url url" href="https://intel.com/">Mikhail Pozdnyakov</a> (<span class="p-org org">Intel Corporation</span>)
     <dd class="editor p-author h-card vcard" data-editor-id="78335"><a class="p-name fn u-url url" href="https://intel.com/">Alexander Shalamov</a> (<span class="p-org org">Intel Corporation</span>)
     <dt class="editor">Former Editor:
     <dd class="editor p-author h-card vcard" data-editor-id="60809"><a class="p-name fn u-url url" href="http://tobie.me">Tobie Langel</a> (<span class="p-org org">Codespeaks, formerly on behalf of Intel Corporation</span>) <a class="u-email email" href="mailto:tobie@codespeaks.com">tobie@codespeaks.com</a>
     <dt>Other:
     <dd><span><a href="https://github.com/w3c/web-platform-tests/tree/master/generic-sensor">Test suite</a>, <a href="https://github.com/w3c/sensors/commits/master/index.bs">latest version history</a>, <a href="https://github.com/w3c/sensors/commits/gh-pages/index.bs">previous version history</a></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2017 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This specification defines a framework for exposing sensor data

to the Open Web Platform in a consistent way.
It does so by defining a blueprint for writing
specifications of concrete sensors along with an abstract Sensor interface
that can be extended to accommodate different sensor types.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p> If you wish to make comments regarding this document, please send them to <a href="mailto:public-device-apis@w3.org?Subject=%5Bgeneric-sensor%5D%20PUT%20SUBJECT%20HERE">public-device-apis@w3.org</a> (<a href="mailto:public-device-apis-request@w3.org?subject=subscribe">subscribe</a>, <a href="https://lists.w3.org/Archives/Public/public-device-apis/">archives</a>).
	When sending e-mail,
	please put the text “generic-sensor” in the subject,
	preferably like this:
	“[generic-sensor] <em>…summary of comment…</em>”.
	All comments are welcome. </p>
   <p> This document was produced by the <a href="https://www.w3.org/2009/dap/">Device and Sensors Working Group</a>. </p>
   <p> This document was produced by a group operating under
	the <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
	W3C maintains a <a href="https://www.w3.org/2004/01/pp-impl/43696/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/2017/Process-20170301/" id="w3c_process_revision">1 March 2017 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#scope"><span class="secno">2</span> <span class="content">Scope</span></a>
    <li><a href="#background"><span class="secno">3</span> <span class="content">Background</span></a>
    <li><a href="#feature-detection"><span class="secno">4</span> <span class="content">A note on Feature Detection of Hardware Features</span></a>
    <li>
     <a href="#security-and-privacy"><span class="secno">5</span> <span class="content">Security and privacy considerations</span></a>
     <ol class="toc">
      <li>
       <a href="#main-privacy-security-threats"><span class="secno">5.1</span> <span class="content">Types of privacy and security threats</span></a>
       <ol class="toc">
        <li><a href="#location-tracking"><span class="secno">5.1.1</span> <span class="content">Location Tracking</span></a>
        <li><a href="#eavesdropping"><span class="secno">5.1.2</span> <span class="content">Eavesdropping</span></a>
        <li><a href="#keystroke-monitoring"><span class="secno">5.1.3</span> <span class="content">Keystroke Monitoring</span></a>
        <li><a href="#device-fingerprinting"><span class="secno">5.1.4</span> <span class="content">Device Fingerprinting</span></a>
        <li><a href="#user-identifying"><span class="secno">5.1.5</span> <span class="content">User Identifying</span></a>
       </ol>
      <li>
       <a href="#mitigation-strategies"><span class="secno">5.2</span> <span class="content">Mitigation Strategies</span></a>
       <ol class="toc">
        <li><a href="#secure-context"><span class="secno">5.2.1</span> <span class="content">Secure Context</span></a>
        <li><a href="#top-level-browsing-context"><span class="secno">5.2.2</span> <span class="content">Top-Level Browsing Context</span></a>
        <li><a href="#losing-focus"><span class="secno">5.2.3</span> <span class="content">Losing Focus</span></a>
        <li><a href="#visibility-state"><span class="secno">5.2.4</span> <span class="content">Visibility State</span></a>
        <li><a href="#permissions"><span class="secno">5.2.5</span> <span class="content">Permissions API</span></a>
       </ol>
      <li>
       <a href="#mitigation-strategies-case-by-case"><span class="secno">5.3</span> <span class="content">Mitigation strategies applied on a case by case basis</span></a>
       <ol class="toc">
        <li><a href="#limit-max-frequency"><span class="secno">5.3.1</span> <span class="content">Limit maximum sampling frequency</span></a>
        <li><a href="#stop-sensor"><span class="secno">5.3.2</span> <span class="content">Stop the sensor altogether</span></a>
        <li><a href="#limit-number-of-delivered-readings"><span class="secno">5.3.3</span> <span class="content">Limit number of delivered readings</span></a>
        <li><a href="#reduce-accuracy"><span class="secno">5.3.4</span> <span class="content">Reduce accuracy</span></a>
        <li><a href="#inform-user"><span class="secno">5.3.5</span> <span class="content">Keep the user informed about API use</span></a>
       </ol>
     </ol>
    <li>
     <a href="#concepts"><span class="secno">6</span> <span class="content">Concepts</span></a>
     <ol class="toc">
      <li><a href="#concepts-sensors"><span class="secno">6.1</span> <span class="content">Sensors</span></a>
      <li><a href="#concepts-sensor-types"><span class="secno">6.2</span> <span class="content">Sensor Types</span></a>
      <li><a href="#concepts-reporting-modes"><span class="secno">6.3</span> <span class="content">Reporting Modes</span></a>
      <li><a href="#concepts-sampling-frequency"><span class="secno">6.4</span> <span class="content">Sampling Frequency</span></a>
     </ol>
    <li>
     <a href="#model"><span class="secno">7</span> <span class="content">Model</span></a>
     <ol class="toc">
      <li><a href="#model-sensor-type"><span class="secno">7.1</span> <span class="content">Sensor Type</span></a>
      <li><a href="#model-sensor"><span class="secno">7.2</span> <span class="content">Sensor</span></a>
     </ol>
    <li>
     <a href="#api"><span class="secno">8</span> <span class="content">API</span></a>
     <ol class="toc">
      <li>
       <a href="#the-sensor-interface"><span class="secno">8.1</span> <span class="content">The Sensor Interface</span></a>
       <ol class="toc">
        <li><a href="#sensor-lifecycle"><span class="secno">8.1.1</span> <span class="content">Sensor lifecycle</span></a>
        <li><a href="#sensor-internal-slots"><span class="secno">8.1.2</span> <span class="content">Sensor internal slots</span></a>
        <li><a href="#sensor-activated"><span class="secno">8.1.3</span> <span class="content">Sensor.activated</span></a>
        <li><a href="#sensor-timestamp"><span class="secno">8.1.4</span> <span class="content">Sensor.timestamp</span></a>
        <li><a href="#sensor-start"><span class="secno">8.1.5</span> <span class="content">Sensor.start()</span></a>
        <li><a href="#sensor-stop"><span class="secno">8.1.6</span> <span class="content">Sensor.stop()</span></a>
        <li><a href="#sensor-onreading"><span class="secno">8.1.7</span> <span class="content">Sensor.onreading</span></a>
        <li><a href="#sensor-onactivate"><span class="secno">8.1.8</span> <span class="content">Sensor.onactivate</span></a>
        <li><a href="#sensor-onerror"><span class="secno">8.1.9</span> <span class="content">Sensor.onerror</span></a>
        <li><a href="#event-handlers"><span class="secno">8.1.10</span> <span class="content">Event handlers</span></a>
       </ol>
      <li>
       <a href="#the-sensor-error-event-interface"><span class="secno">8.2</span> <span class="content">The SensorErrorEvent Interface</span></a>
       <ol class="toc">
        <li><a href="#sensor-error-event-error"><span class="secno">8.2.1</span> <span class="content">SensorErrorEvent.error</span></a>
       </ol>
     </ol>
    <li>
     <a href="#abstract-operations"><span class="secno">9</span> <span class="content">Abstract Operations</span></a>
     <ol class="toc">
      <li><a href="#construct-sensor-object"><span class="secno">9.1</span> <span class="content">Construct sensor object</span></a>
      <li><a href="#connect-to-sensor"><span class="secno">9.2</span> <span class="content">Connect to sensor</span></a>
      <li><a href="#activate-a-sensor-object"><span class="secno">9.3</span> <span class="content">Activate a sensor object</span></a>
      <li><a href="#deactivate-a-sensor-object"><span class="secno">9.4</span> <span class="content">Deactivate a sensor object</span></a>
      <li><a href="#revoke-sensor-permission"><span class="secno">9.5</span> <span class="content">Revoke sensor permission</span></a>
      <li><a href="#set-sensor-settings"><span class="secno">9.6</span> <span class="content">Set sensor settings</span></a>
      <li><a href="#update-latest-reading"><span class="secno">9.7</span> <span class="content">Update latest reading</span></a>
      <li><a href="#security-check"><span class="secno">9.8</span> <span class="content">Security check</span></a>
      <li><a href="#find-the-reporting-frequency-of-a-sensor-object"><span class="secno">9.9</span> <span class="content">Find the reporting frequency of a sensor object</span></a>
      <li><a href="#report-latest-reading-updated"><span class="secno">9.10</span> <span class="content">Report latest reading updated</span></a>
      <li><a href="#notify-new-reading"><span class="secno">9.11</span> <span class="content">Notify new reading</span></a>
      <li><a href="#notify-activated-state"><span class="secno">9.12</span> <span class="content">Notify activated state</span></a>
      <li><a href="#notify-error"><span class="secno">9.13</span> <span class="content">Notify error</span></a>
      <li><a href="#get-value-from-latest-reading"><span class="secno">9.14</span> <span class="content">Get value from latest reading</span></a>
      <li><a href="#request-sensor-access"><span class="secno">9.15</span> <span class="content">Request sensor access</span></a>
     </ol>
    <li>
     <a href="#extensibility"><span class="secno">10</span> <span class="content">Extensibility</span></a>
     <ol class="toc">
      <li><a href="#security"><span class="secno">10.1</span> <span class="content">Security</span></a>
      <li><a href="#naming"><span class="secno">10.2</span> <span class="content">Naming</span></a>
      <li><a href="#unit"><span class="secno">10.3</span> <span class="content">Unit</span></a>
      <li><a href="#high-vs-low-level"><span class="secno">10.4</span> <span class="content">Exposing High-Level vs. Low-Level Sensors</span></a>
      <li><a href="#multiple-sensors"><span class="secno">10.5</span> <span class="content">When is Enabling Multiple Sensors of the Same Type Not the Right Choice?</span></a>
      <li><a href="#definition-reqs"><span class="secno">10.6</span> <span class="content">Definition Requirements</span></a>
      <li><a href="#permission-api"><span class="secno">10.7</span> <span class="content">Extending the Permission API</span></a>
      <li><a href="#example-webidl"><span class="secno">10.8</span> <span class="content">Example WebIDL</span></a>
     </ol>
    <li><a href="#acknowledgements"><span class="secno">11</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
      <li><a href="#conformance-classes"><span class="secno"></span> <span class="content">Conformance Classes</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>Increasingly, sensor data is used in application development to
enable new use cases such as geolocation,
counting steps or head-tracking.
This is especially true on mobile devices where new sensors are added regularly.</p>
   <p>Exposing sensor data to the Web
has so far been both slow-paced and ad-hoc.
Few sensors are already exposed to the Web.
When they are, it is often in ways that limit their possible use cases
(for example by exposing abstractions that are too <a data-link-type="dfn" href="#high-level" id="ref-for-high-level">high-level</a> and which don’t perform well enough).
APIs also vary greatly from one sensor to the next
which increases the cognitive burden of Web application developers
and slows development.</p>
   <p>The goal of the Generic Sensor API is to
promote consistency across sensor APIs,
enable advanced use cases thanks to performant <a data-link-type="dfn" href="#low-level" id="ref-for-low-level">low-level</a> APIs,
and increase the pace at which new sensors can be exposed to the Web
by simplifying the specification and implementation processes.</p>
   <p class="issue" id="issue-77d9d95c"><a class="self-link" href="#issue-77d9d95c"></a> This lacks an informative section with examples for developers.
Should contain different use of the API,
including using it in conjunction with <code>requestAnimationFrame</code>.</p>
   <h2 class="heading settled" data-level="2" id="scope"><span class="secno">2. </span><span class="content">Scope</span><a class="self-link" href="#scope"></a></h2>
   <p><em>This section is non-normative</em>.</p>
   <p>The scope of this specification is currently limited
to specifying primitives
which enable expose data from local sensors.</p>
   <p>Exposing remote sensors
or sensors found on personal area networks (e.g. Bluetooth)
is out of scope.
As work in these areas mature,
it is possible that common, lower-level primitives be found,
in which case this specification will be updated accordingly.
This should have little to no effects on implementations, however.</p>
   <p>This specification also does not currently expose a
sensor discovery API.
This is because the limited number of sensors currently available to user agents
does not warrant such an API.
Using feature detection, such as described in <a href="#feature-detection">§4 A note on Feature Detection of Hardware Features</a>,
is good enough for now.
A subsequent version of this specification might specify such an API,
and the current API has been designed with this in mind.</p>
   <h2 class="heading settled" data-level="3" id="background"><span class="secno">3. </span><span class="content">Background</span><a class="self-link" href="#background"></a></h2>
   <p><em>This section is non-normative</em>.</p>
   <p class="issue" id="issue-6a3e5f8d"><a class="self-link" href="#issue-6a3e5f8d"></a> This section is ill-named.
It principally covers default sensors
and explains the reasoning behind them.
It should be renamed accordingly and moved,
either to another section of the spec
or to an external explainer document.</p>
   <p>The Generic Sensor API is designed to make the most common use cases straightforward
while still enabling more complex use cases.</p>
   <p>Most devices deployed today do not carry more than one <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor">sensor</a> of each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type">sensor types</a>.
This shouldn’t come as a surprise since use cases for more than
a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor①">sensor</a> of a given <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type①">type</a> are rare
and generally limited to specific <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type②">sensor types</a>,
such as proximity sensors.</p>
   <p>The API therefore makes it easy to interact with
the device’s default (and often unique) <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor②">sensor</a> for each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type③">type</a> simply by instantiating the corresponding <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor">Sensor</a></code> subclass.</p>
   <p>Indeed, without specific information identifying a particular <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor③">sensor</a> of a given <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type④">type</a>,
the default <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor④">sensor</a> is chosen.</p>
   <div class="example" id="example-2b740ace">
    <a class="self-link" href="#example-2b740ace"></a> Listening to geolocation changes: 
<pre class="highlight"><span class="kd">let</span> sensor <span class="o">=</span> <span class="k">new</span> GeolocationSensor<span class="p">({</span> accuracy<span class="o">:</span> <span class="s2">"high"</span> <span class="p">});</span>

sensor<span class="p">.</span>onreading <span class="o">=</span> <span class="kd">function</span><span class="p">(</span>event<span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> coords <span class="o">=</span> <span class="p">[</span>sensor<span class="p">.</span>latitude<span class="p">,</span> sensor<span class="p">.</span>longitude<span class="p">];</span>
    updateMap<span class="p">(</span><span class="kc">null</span><span class="p">,</span> coords<span class="p">,</span> sensor<span class="p">.</span>accuracy<span class="p">);</span>
<span class="p">};</span>

sensor<span class="p">.</span>onerror <span class="o">=</span> <span class="kd">function</span><span class="p">(</span>error<span class="p">)</span> <span class="p">{</span>
    updateMap<span class="p">(</span>error<span class="p">);</span>
<span class="p">};</span>
sensor<span class="p">.</span>start<span class="p">();</span>
</pre>
   </div>
   <p class="note" role="note"><span>Note:</span> extension to this specification may choose not to define a default sensor
when doing so wouldn’t make sense.
For example, it might be difficult to agree on an obvious default <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor⑤">sensor</a> for
proximity <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor⑥">sensors</a>.</p>
   <p>In cases where
multiple <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor⑦">sensors</a> of the same <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type⑤">type</a> may coexist on the same device,
specification extension will have to
define ways to uniquely identify each one.</p>
   <div class="example" id="example-fdd94e11">
    <a class="self-link" href="#example-fdd94e11"></a> For example checking the pressure of the left rear tire: 
<pre class="highlight"><span class="kd">var</span> sensor <span class="o">=</span> <span class="k">new</span> DirectTirePressureSensor<span class="p">({</span> position<span class="o">:</span> <span class="s2">"rear"</span><span class="p">,</span> side<span class="o">:</span> <span class="s2">"left"</span> <span class="p">});</span>
sensor<span class="p">.</span>onreading <span class="o">=</span> _ <span class="o">=></span> console<span class="p">.</span>log<span class="p">(</span>sensor<span class="p">.</span>pressure<span class="p">);</span>
sensor<span class="p">.</span>start<span class="p">();</span>
</pre>
   </div>
   <h2 class="heading settled" data-level="4" id="feature-detection"><span class="secno">4. </span><span class="content">A note on Feature Detection of Hardware Features</span><a class="self-link" href="#feature-detection"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>Feature detection is an established Web development best practice.
Resources on the topic are plentiful on and offline and
the purpose of this section is not to discuss it further,
but rather to put it in the context of detecting hardware-dependent features.</p>
   <p>Consider the below feature detection examples:</p>
   <div class="example" id="example-6dd6f109">
    <a class="self-link" href="#example-6dd6f109"></a> 
<pre class="highlight"><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> Gyroscope <span class="o">===</span> <span class="s2">"function"</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// run in circles...</span>
<span class="c1"></span><span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="s2">"ProximitySensor"</span> <span class="k">in</span> window<span class="p">)</span> <span class="p">{</span>
    <span class="c1">// watch out!</span>
<span class="c1"></span><span class="p">}</span>

<span class="k">if</span> <span class="p">(</span>window<span class="p">.</span>AmbientLightSensor<span class="p">)</span> <span class="p">{</span>
    <span class="c1">// go dark...</span>
<span class="c1"></span><span class="p">}</span>

<span class="c1">// etc.</span>
</pre>
   </div>
   <p>All of these tell you something about the presence
and possible characteristics of an API.
They do not tell you anything, however, about whether
that API is actually connected to a real hardware sensor,
whether that sensor works,
if its still connected,
or even whether the user is going to allow you to access it.
Note you can check the latter using the Permissions API <a data-link-type="biblio" href="#biblio-permissions">[PERMISSIONS]</a>.</p>
   <p>In an ideal world, information about the underlying status
would be available upfront.
The problem with this is twofold.
First, getting this information out of the hardware is costly,
in both performance and battery time,
and would sit in the critical path.
Secondly, the status of the underlying hardware can evolve over time.
The user can revoke permission, the connection to the sensor be severed,
the operating system may decide to limit sensor usage below a certain battery threshold,
etc.</p>
   <p>Therefore, an effective strategy is to combine feature detection,
which checks whether an API for the sought-after sensor actually exists,
and defensive programming which includes:</p>
   <ol>
    <li data-md="">
     <p>checking for error thrown when instantiating a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor①">Sensor</a></code> object,</p>
    <li data-md="">
     <p>listening to errors emitted by it,</p>
    <li data-md="">
     <p>handling all of the above graciously so that the user’s experience is
  enhanced by the possible usage of a sensor, not degraded by its
  absence.</p>
   </ol>
   <div class="example" id="example-8dd2494f">
    <a class="self-link" href="#example-8dd2494f"></a> 
<pre class="highlight"><span class="k">try</span> <span class="p">{</span> <span class="c1">// No need to feature detect thanks to try..catch block.</span>
<span class="c1"></span>    <span class="kd">var</span> sensor <span class="o">=</span> <span class="k">new</span> GeolocationSensor<span class="p">();</span>
    sensor<span class="p">.</span>start<span class="p">();</span>
    sensor<span class="p">.</span>onerror <span class="o">=</span> error <span class="o">=></span> gracefullyDegrade<span class="p">(</span>error<span class="p">);</span>
    sensor<span class="p">.</span>onreading <span class="o">=</span> _ <span class="o">=></span> updatePosition<span class="p">(</span>sensor<span class="p">.</span>latitude<span class="p">,</span> sensor<span class="p">.</span>longitude<span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span>error<span class="p">)</span> <span class="p">{</span>
    gracefullyDegrade<span class="p">(</span>error<span class="p">);</span>
<span class="p">}</span>
</pre>
   </div>
   <h2 class="heading settled" data-level="5" id="security-and-privacy"><span class="secno">5. </span><span class="content">Security and privacy considerations</span><a class="self-link" href="#security-and-privacy"></a></h2>
   <p><a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings">Sensor readings</a> are sensitive data and could become a subject of
various attacks from malicious Web pages. Before discussing the mitigation strategies we
briefly enumerate the main types of the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor⑧">sensor</a>'s privacy and security threats.
The <a data-link-type="biblio" href="#biblio-mobilesensors">[MOBILESENSORS]</a> categorizes main threats into <a href="#location-tracking">location tracking</a>, <a href="#eavesdropping">eavesdropping</a>, <a href="#keystroke-monitoring">keystroke monitoring</a>, <a href="#device-fingerprinting">device fingerprinting</a>, and <a href="#user-identifying">user identification</a>.
This categorization is a good fit for this specification.</p>
   <p>The risk of successful attack can increase when <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor⑨">sensors</a> are used with each other,
in combination with other functionality, or when used over time,
specifically with the risk of correlation of data
and user identification through fingerprinting.
Web application developers using these JavaScript APIs should
consider how this information might be correlated with other information
and the privacy risks that might be created.
The potential risks of collection of such data over a longer period of time
should also be considered.</p>
   <p>Variations in <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings①">sensor readings</a> as well as event firing rates
offer the possibility of fingerprinting to identify users.
User agents may reduce the risk by
limiting event rates available to web application developers.</p>
   <p class="note" role="note"><span>Note:</span> do we really want this mitigation strategy?</p>
   <p>Frequency polling in <a data-link-type="dfn" href="#periodic" id="ref-for-periodic">periodic</a> <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes">reporting mode</a> might allow the fingerprinting of hardware or implementation types,
by probing which actual frequencies are supported by the platform.</p>
   <p>Minimizing the accuracy of a sensor’s readout
generally decreases the risk of fingerprinting.
User agents should not provide unnecessarily verbose readouts of sensors data.
Each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type⑥">sensor type</a> should be assessed individually.</p>
   <p>If the same JavaScript code using the API can be
used simultaneously in different window contexts on the same device
it may be possible for that code to correlate the user across those two contexts,
creating unanticipated tracking mechanisms.</p>
   <p>User agents should consider providing the user
an indication of when the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor①⓪">sensor</a> is used
and allowing the user to disable it.
Additionally, user agents may consider
allowing the user to verify past and current sensor use patterns.</p>
   <p>Web application developers that use <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor①①">sensors</a> should
perform a privacy impact assessment of their application
taking all aspects of their application into consideration.</p>
   <p>Ability to detect a full working set of sensors on a device can form an
identifier and could be used for fingerprinting.</p>
   <p>A combination of selected sensors can potentially be used to form an out of
band communication channel between devices.</p>
   <p>Sensors can potentially be used in cross-device linking and tracking of a user.</p>
   <h3 class="heading settled" data-level="5.1" id="main-privacy-security-threats"><span class="secno">5.1. </span><span class="content">Types of privacy and security threats</span><a class="self-link" href="#main-privacy-security-threats"></a></h3>
   <p><em>This section is non-normative.</em></p>
   <h4 class="heading settled" data-level="5.1.1" id="location-tracking"><span class="secno">5.1.1. </span><span class="content">Location Tracking</span><a class="self-link" href="#location-tracking"></a></h4>
   <p>Under this type of threat, the attacks use <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings②">sensor readings</a> to locate the device without
using GPS or any other location sensors. For example, accelerometer data can be used to infer
the location of smartphones by using statistical models to obtain estimated trajectory,
then map matching algorithms can be used to obtain predicted location points (within a
200-m radius)<a data-link-type="biblio" href="#biblio-mobilesensors">[MOBILESENSORS]</a>.</p>
   <h4 class="heading settled" data-level="5.1.2" id="eavesdropping"><span class="secno">5.1.2. </span><span class="content">Eavesdropping</span><a class="self-link" href="#eavesdropping"></a></h4>
   <p>Recovering speech from gyroscope <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings③">readings</a> is an example of eavesdropping attack.
See <a data-link-type="biblio" href="#biblio-gyrospeechrecognition">[GYROSPEECHRECOGNITION]</a>.</p>
   <h4 class="heading settled" data-level="5.1.3" id="keystroke-monitoring"><span class="secno">5.1.3. </span><span class="content">Keystroke Monitoring</span><a class="self-link" href="#keystroke-monitoring"></a></h4>
   <p>Many user inputs can be inferred from <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings④">sensor readings</a>, this includes a wide range of attacks
on user PINs, passwords, and lock patterns (and even touch actions such as click, scroll, and
zoom) using motion sensors. These attacks normally train a machine learning algorithm to
discover such information about the users. See <a data-link-type="biblio" href="#biblio-stealingpinsviasensors">[STEALINGPINSVIASENSORS]</a>.</p>
   <h4 class="heading settled" data-level="5.1.4" id="device-fingerprinting"><span class="secno">5.1.4. </span><span class="content">Device Fingerprinting</span><a class="self-link" href="#device-fingerprinting"></a></h4>
   <p>Sensors can provide information that can uniquely identify the device using those sensors.
Every concrete sensor model has minor manufacturing imperfections and differences that will be
unique for this model. These manufacturing variations and imperfections can be used to fingerprint
the device <a data-link-type="biblio" href="#biblio-mobilesensors">[MOBILESENSORS]</a>.</p>
   <h4 class="heading settled" data-level="5.1.5" id="user-identifying"><span class="secno">5.1.5. </span><span class="content">User Identifying</span><a class="self-link" href="#user-identifying"></a></h4>
   <p><a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings⑤">Sensor readings</a> can be used to identify the user, for example via inferring
individual walking patterns from smartphone or wearable device motion sensors' data.</p>
   <h3 class="heading settled" data-level="5.2" id="mitigation-strategies"><span class="secno">5.2. </span><span class="content">Mitigation Strategies</span><a class="self-link" href="#mitigation-strategies"></a></h3>
   <p><em>This section is non-normative.</em></p>
   <p>This section gives a high-level presentation of some of the mitigation strategies
specified in the normative sections of this specification.</p>
   <h4 class="heading settled" data-level="5.2.1" id="secure-context"><span class="secno">5.2.1. </span><span class="content">Secure Context</span><a class="self-link" href="#secure-context"></a></h4>
   <p><a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings⑥">Sensor readings</a> are explicitly flagged by the
Secure Contexts specification <a data-link-type="biblio" href="#biblio-powerful-features">[POWERFUL-FEATURES]</a> as a high-value target for network attackers.
Thus all interfaces defined by this specification
or extension specifications
are only available within a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#secure-context" id="ref-for-secure-context">secure context</a>.</p>
   <h4 class="heading settled" data-level="5.2.2" id="top-level-browsing-context"><span class="secno">5.2.2. </span><span class="content">Top-Level Browsing Context</span><span id="browsing-context"></span><a class="self-link" href="#top-level-browsing-context"></a></h4>
   <p>To avoid the privacy risk of
sharing <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings⑦">sensor readings</a> with contexts unfamiliar to the user, <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings⑧">sensor readings</a> are only available in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context">top-level browsing context</a>.</p>
   <p class="note" role="note"><span>Note:</span> <a data-link-type="biblio" href="#biblio-feature-policy">[FEATURE-POLICY]</a> will allow securely relaxing those restrictions once it matures.</p>
   <h4 class="heading settled" data-level="5.2.3" id="losing-focus"><span class="secno">5.2.3. </span><span class="content">Losing Focus</span><a class="self-link" href="#losing-focus"></a></h4>
   <p>When the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①">top-level browsing context</a> loses focus,
or when a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context" id="ref-for-nested-browsing-context">nested browsing context</a> of a different <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2" id="ref-for-origin-2">origin</a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#gains-focus" id="ref-for-gains-focus">gains focus</a> (for example when the user carries out an in-game purchase
using a third party payment service from within an iframe)
the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context②">top-level browsing contexts</a> suddenly becomes in a position
to carry out a skimming attack against the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context">browsing context</a> that has <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#gains-focus" id="ref-for-gains-focus①">gained focus</a>.</p>
   <p>To mitigate this threat, <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings⑨">readings</a> of <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor①②">sensors</a> running in a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context③">top-level browsing contexts</a> are not delivered in such cases.
A <a data-link-type="dfn" href="#security-check" id="ref-for-security-check">security check</a> is run before <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings①⓪">sensor readings</a> are delivered to ensure that.</p>
   <h4 class="heading settled" data-level="5.2.4" id="visibility-state"><span class="secno">5.2.4. </span><span class="content">Visibility State</span><a class="self-link" href="#visibility-state"></a></h4>
   <p><a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings①①">Sensor readings</a> are only available
in <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context④">browsing contexts</a> that are visible to the user,
that is, whose <a data-link-type="dfn" href="https://w3c.github.io/page-visibility#dfn-steps-to-determine-the-visibility-state" id="ref-for-dfn-steps-to-determine-the-visibility-state">visibility state</a> is "visible".
A <a data-link-type="dfn" href="#security-check" id="ref-for-security-check①">security check</a> is run before <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings①②">sensor readings</a> are delivered to ensure that.</p>
   <p class="issue" id="issue-a175b438"><a class="self-link" href="#issue-a175b438"></a> certain use cases require sensors to have background access.
Using a more complex <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dictdef-permissiondescriptor" id="ref-for-dictdef-permissiondescriptor">PermissionDescriptor</a></code>.
(e.g. with a boolean <code>allowBackgroundUsage = false</code>; <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member">dictionary member</a>),
might be the solution to relax this restriction.</p>
   <h4 class="heading settled" data-level="5.2.5" id="permissions"><span class="secno">5.2.5. </span><span class="content">Permissions API</span><span id="permissioning"></span><a class="self-link" href="#permissions"></a></h4>
   <p>Access to <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings①③">sensor readings</a> are controlled by the Permissions API <a data-link-type="biblio" href="#biblio-permissions">[PERMISSIONS]</a>.
User agents use a <a data-link-type="dfn" href="https://w3c.github.io/permissions/#new-information-about-the-users-intent" id="ref-for-new-information-about-the-users-intent">number of criteria</a> to grant access to the <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings①④">readings</a>.
Note that access can be granted without prompting the user.</p>
   <h3 class="heading settled" data-level="5.3" id="mitigation-strategies-case-by-case"><span class="secno">5.3. </span><span class="content">Mitigation strategies applied on a case by case basis</span><a class="self-link" href="#mitigation-strategies-case-by-case"></a></h3>
   <p>Each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type⑦">sensor type</a> will need to be assessed individually,
taking into account the use cases it enables
and its particular threat profile.
While some of the below mitigation strategies
are effective for certain sensors,
they might also hinder or altogether prevent certain use cases.</p>
   <p class="note" role="note"><span>Note:</span> These mitigation strategies can be applied constantly or temporarily,
for example when the user is carrying out specific actions,
when other APIs which are known to amplify the level of the threat are in use,
etc.</p>
   <h4 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="5.3.1" data-lt="Limit maximum sampling frequency" data-noexport="" id="limit-max-frequency"><span class="secno">5.3.1. </span><span class="content">Limit maximum sampling frequency</span></h4>
   <p>User agents may mitigate certain threats by
limiting the maximum <a data-link-type="dfn" href="#sampling-frequency" id="ref-for-sampling-frequency">sampling frequency</a>.
What upper limit to choose depends on the <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type⑧">sensor type</a>,
the kind of threats the user agent is trying to protect against,
the expected resources of the attacker, etc.</p>
   <p>Limiting the maximum <a data-link-type="dfn" href="#sampling-frequency" id="ref-for-sampling-frequency①">sampling frequency</a> prevents use cases
which rely on low latency or high data density.</p>
   <h4 class="heading settled" data-dfn-type="dfn" data-level="5.3.2" data-lt="Stop the sensor altogether" data-noexport="" id="stop-sensor"><span class="secno">5.3.2. </span><span class="content">Stop the sensor altogether</span><a class="self-link" href="#stop-sensor"></a></h4>
   <p>This is obviously a last-resort solution,
but it can be extremely effective if it’s temporal,
for example to prevent password skimming attempts
when the user is entering credentials on a different origin (<a data-link-type="biblio" href="#biblio-rfc6454">[rfc6454]</a>)
or in a different application.</p>
   <h4 class="heading settled" data-dfn-type="dfn" data-level="5.3.3" data-lt="Limit number of delivered readings" data-noexport="" id="limit-number-of-delivered-readings"><span class="secno">5.3.3. </span><span class="content">Limit number of delivered readings</span><a class="self-link" href="#limit-number-of-delivered-readings"></a></h4>
   <p>An alternative to <a data-link-type="dfn" href="#limit-max-frequency" id="ref-for-limit-max-frequency">limiting the maximum sampling frequency</a> is to
limit the number of <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings①⑤">sensor readings</a> delivered to Web application developer,
regardless of what frequency the sensor is polled at.
This allows use cases which have low latency requirement
to increase <a data-link-type="dfn" href="#sampling-frequency" id="ref-for-sampling-frequency②">sampling frequency</a> without increasing the amount of data provided.</p>
   <p>Discarding intermediary readings prevents certain use cases,
such as those relying on certain kinds of filters.</p>
   <h4 class="heading settled" data-dfn-type="dfn" data-level="5.3.4" data-lt="Reduce accuracy" data-noexport="" id="reduce-accuracy"><span class="secno">5.3.4. </span><span class="content">Reduce accuracy</span><a class="self-link" href="#reduce-accuracy"></a></h4>
   <p>Reducing the accuracy of <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings①⑥">sensor readings</a> or sensor reading timestamps
might also help mitigate certain threats,
thus user agents should not provide
unnecessarily verbose readouts of sensors data.</p>
   <p>However, certain use cases require highly accurate readings,
especially when operations carried out on the readings,
or time deltas calculated from the timestamps,
increase inaccuracies exponentially.</p>
   <p class="note" role="note"><span>Note:</span> while adding random bias to <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings①⑦">sensor readings</a> has similar effects,
it shouldn’t be used in practice
as it is easy to filter out the added noise.</p>
   <h4 class="heading settled" data-level="5.3.5" id="inform-user"><span class="secno">5.3.5. </span><span class="content">Keep the user informed about API use</span><a class="self-link" href="#inform-user"></a></h4>
   <p>User agents may choose to keep the user informed
about current and past use of the API.</p>
   <p class="note" role="note"><span>Note:</span> this does not imply keeping a log of the actual <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings①⑧">sensor readings</a> which would have issues of its own.</p>
   <h2 class="heading settled" data-level="6" id="concepts"><span class="secno">6. </span><span class="content">Concepts</span><a class="self-link" href="#concepts"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="concepts-sensors"><span class="secno">6.1. </span><span class="content">Sensors</span><a class="self-link" href="#concepts-sensors"></a></h3>
   <p>A <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor①③">sensor</a> measures different physical quantities
and provide corresponding <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="raw-sensor-readings">raw sensor readings</dfn> which are a source of information about the user and their environment.</p>
   <p>Each <a data-link-type="dfn" href="#raw-sensor-readings" id="ref-for-raw-sensor-readings">reading</a> is composed of the <dfn data-dfn-type="dfn" data-lt="reading value" data-noexport="" id="reading-value">values<a class="self-link" href="#reading-value"></a></dfn> of the different physical quantities measured by the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor①④">sensor</a> at time <var>t<sub>n</sub></var>.</p>
   <p>Known, <em>predictable</em> discrepancies between <a data-link-type="dfn" href="#raw-sensor-readings" id="ref-for-raw-sensor-readings①">raw sensor readings</a> and the corresponding physical quantities being measured
are corrected through <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="calibration">calibration</dfn>.</p>
   <p>Known but <em>unpredictable</em> discrepancies need to be addressed dynamically
through a process called <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion">sensor fusion</a>.</p>
   <p><a data-link-type="dfn" href="#calibration" id="ref-for-calibration">Calibrated</a> <a data-link-type="dfn" href="#raw-sensor-readings" id="ref-for-raw-sensor-readings②">raw sensor readings</a> are referred to as <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sensor-readings">sensor readings</dfn>,
whether or not they have undergone <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion①">sensor fusion</a>.</p>
   <h3 class="heading settled" data-level="6.2" id="concepts-sensor-types"><span class="secno">6.2. </span><span class="content">Sensor Types</span><a class="self-link" href="#concepts-sensor-types"></a></h3>
   <p>Different <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type⑨">sensor types</a> measure different physical quantities
such as temperature, air pressure, heart-rate, or luminosity.</p>
   <p>For the purpose of this specification we distinguish between <a data-link-type="dfn" href="#high-level" id="ref-for-high-level①">high-level</a> and <a data-link-type="dfn" href="#low-level" id="ref-for-low-level①">low-level</a> <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type①⓪">sensor types</a>.</p>
   <p><a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type①①">Sensor types</a> which are characterized by their implementation
are referred to as <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="low-level">low-level</dfn> sensors.
For example a Gyroscope is a <a data-link-type="dfn" href="#low-level" id="ref-for-low-level②">low-level</a> <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type①②">sensor type</a>.</p>
   <p><a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor①⑤">Sensors</a> named after their <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings①⑨">readings</a>,
regardless of the implementation,
are said to be <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="high-level">high-level</dfn> sensors.
For instance, geolocation sensors provide information about the user’s location,
but the precise means by which this data is obtained
is purposefully left opaque
(it could come from a GPS chip, network cell triangulation,
wifi networks, etc. or any combination of the above)
and depends on various, implementation-specific heuristics. <a data-link-type="dfn" href="#high-level" id="ref-for-high-level②">High-level</a> sensors are generally the fruits of
applying algorithms to <a data-link-type="dfn" href="#low-level" id="ref-for-low-level③">low-level</a> sensors—<wbr>for example, a pedometer can be built using only the output of a gyroscope—<wbr>or of <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion②">sensor fusion</a>.</p>
   <p>That said, the distinction between <a data-link-type="dfn" href="#high-level" id="ref-for-high-level③">high-level</a> and <a data-link-type="dfn" href="#low-level" id="ref-for-low-level④">low-level</a> <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type①③">sensor types</a> is somewhat arbitrary and the line between the two is often blurred.
For instance, a barometer, which measures air pressure,
would be considered <a data-link-type="dfn" href="#low-level" id="ref-for-low-level⑤">low-level</a> for most common purposes,
even though it is the product of the <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion③">sensor fusion</a> of
resistive piezo-electric pressure and temperature sensors.
Exposing the sensors that compose it would serve no practical purpose;
who cares about the temperature of a piezo-electric sensor?
A pressure-altimeter would probably fall in the same category,
while a nondescript altimeter—<wbr>which could get its data from either a barometer or a GPS signal—<wbr>would clearly be categorized as a <a data-link-type="dfn" href="#high-level" id="ref-for-high-level④">high-level</a> <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type①④">sensor type</a>.</p>
   <p>Because the distinction is somewhat blurry,
extensions to this specification (see <a href="#extensibility">§10 Extensibility</a>)
are encouraged to provide domain-specific definitions of <a data-link-type="dfn" href="#high-level" id="ref-for-high-level⑤">high-level</a> and <a data-link-type="dfn" href="#low-level" id="ref-for-low-level⑥">low-level</a> sensors
for the given <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type①⑤">sensor types</a> they are targeting.</p>
   <p><a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings②⓪">Sensor readings</a> from different <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type①⑥">sensor types</a> can be combined together
through a process called <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sensor-fusion">sensor fusion</dfn>.
This process provides <a data-link-type="dfn" href="#high-level" id="ref-for-high-level⑥">higher-level</a> or
more accurate data (often at the cost of increased latency).
For example, the <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings②①">readings</a> of a three-axis magnetometer
needs to be combined with the <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings②②">readings</a> of an accelerometer
to provide a correct bearing.</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="smart-sensors">Smart sensors</dfn> and <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sensor-hubs">sensor hubs</dfn> have built-in compute resources which allow them
to carry out <a data-link-type="dfn" href="#calibration" id="ref-for-calibration①">calibration</a> and <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion④">sensor fusion</a> at the hardware level,
freeing up CPU resources
and lowering battery consumption
in the process.</p>
   <p>But <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion⑤">sensor fusion</a> can also be carried out in software.
This is particularly useful when performance requirements can only be met
by relying on application-specific data.
For example, head tracking for virtual or augmented reality applications
requires extremely low latency
to avoid causing motion sickness.
That low-latency is best provided
by using the raw output of a gyroscope
and waiting for quick rotational movements of the head
to compensate for drift.</p>
   <p class="note" role="note"><span>Note:</span> <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor①⑥">sensors</a> created through <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion⑥">sensor fusion</a> are sometimes
called virtual or synthetic sensors.
However, the specification doesn’t make any practical differences between them,
preferring instead to differentiate <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor①⑦">sensors</a> as to whether they describe
the kind of <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings②③">readings</a> produced--these are <a data-link-type="dfn" href="#high-level" id="ref-for-high-level⑦">high-level</a> sensors—<wbr>or how the sensor is implemented (<a data-link-type="dfn" href="#low-level" id="ref-for-low-level⑦">low-level</a> sensors).</p>
   <h3 class="heading settled" data-level="6.3" id="concepts-reporting-modes"><span class="secno">6.3. </span><span class="content">Reporting Modes</span><a class="self-link" href="#concepts-reporting-modes"></a></h3>
   <p class="issue" id="issue-f240c7ff"><a class="self-link" href="#issue-f240c7ff"></a> <strong>This feature is at risk.</strong> It is not clear whether there is value
in splitting up <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type①⑦">sensor types</a> between
those that fire events at regular intervals
and those which don’t.</p>
   <p><a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor①⑧">Sensors</a> have different <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="reporting-modes">reporting modes</dfn>.
When <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings②④">sensor readings</a> are reported at regular intervals,
at an adjustable <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="frequency">frequency</dfn> measured in hertz (Hz),
the <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes①">reporting mode</a> is said to be <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="periodic">periodic</dfn>.
On <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type①⑧">sensor types</a> with support for <a data-link-type="dfn" href="#periodic" id="ref-for-periodic①">periodic reporting mode</a>, <a data-link-type="dfn" href="#periodic" id="ref-for-periodic②">periodic reporting mode</a> is triggered
by requesting a specific <a data-link-type="dfn" href="#frequency" id="ref-for-frequency">frequency</a>.</p>
   <p><a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type①⑨">Sensor types</a> which do not support <a data-link-type="dfn" href="#periodic" id="ref-for-periodic③">periodic reporting mode</a> are said to operate in an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="implementation-specific">implementation specific</dfn> way.
When the <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes②">reporting mode</a> is <a data-link-type="dfn" href="#implementation-specific" id="ref-for-implementation-specific">implementation specific</a>, <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings②⑤">sensor readings</a> may be provided at regular intervals, irregularly,
or only when a <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings②⑥">reading</a> change is observed.
This allows user agents more latitude to
carry out power- or CPU-saving strategies,
and support multiple hardware configurations. <a data-link-type="dfn" href="#periodic" id="ref-for-periodic④">Periodic reporting mode</a>, on the other hand,
allows a much more fine-grained approach
and is essential for use cases with, for example,
low latency requirements.</p>
   <p><a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor①⑨">Sensors</a> which support <a data-link-type="dfn" href="#periodic" id="ref-for-periodic⑤">periodic reporting mode</a> <dfn data-dfn-type="dfn" data-noexport="" id="fallback">fallback<a class="self-link" href="#fallback"></a></dfn> to <a data-link-type="dfn" href="#implementation-specific" id="ref-for-implementation-specific①">implementation specific reporting mode</a> when no requirements are made as to what <a data-link-type="dfn" href="#frequency" id="ref-for-frequency①">frequency</a> they should operate at.</p>
   <p class="note" role="note"><span>Note:</span> <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes③">reporting mode</a> is distinct from,
but related to, <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings②⑦">sensor readings</a> acquisition.
If <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor②⓪">sensors</a> are polled at regular interval,
as is generally the case, <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes④">reporting mode</a> can be either <a data-link-type="dfn" href="#periodic" id="ref-for-periodic⑥">periodic</a> or <a data-link-type="dfn" href="#implementation-specific" id="ref-for-implementation-specific②">implementation specific</a>.
However, when the underlying implementation itself only provides <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings②⑧">sensor readings</a> when it measures change,
perhaps because is is relying on <a data-link-type="dfn" href="#smart-sensors" id="ref-for-smart-sensors">smart sensors</a> or a <a data-link-type="dfn" href="#sensor-hubs" id="ref-for-sensor-hubs">sensor hubs</a>,
the <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes⑤">reporting mode</a> cannot be <a data-link-type="dfn" href="#periodic" id="ref-for-periodic⑦">periodic</a>,
as that would require data inference.</p>
   <p class="issue" id="issue-ac15beaf"><a class="self-link" href="#issue-ac15beaf"></a> This lacks a description of
the different data acquisition modes,
notably polling vs. on change,
both at the platform and HW layer.</p>
   <p class="issue" id="issue-735bbf10"><a class="self-link" href="#issue-735bbf10"></a> It would be useful to describe
the process of sensor sampling and
how increased sensor sampling frequency decreases latency.</p>
   <p class="issue" id="issue-38946dd2"><a class="self-link" href="#issue-38946dd2"></a> A definition of sensor accuracy and
how it affects threshold,
and thus "on change" sensors would be useful.</p>
   <h3 class="heading settled" data-level="6.4" id="concepts-sampling-frequency"><span class="secno">6.4. </span><span class="content">Sampling Frequency</span><a class="self-link" href="#concepts-sampling-frequency"></a></h3>
   <p>For the purpose of this specification, <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sampling-frequency">sampling frequency</dfn> for a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor②①">sensor</a> is defined
as a frequency at which the UA obtains <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings②⑨">sensor readings</a> from the underlying platform.</p>
   <h2 class="heading settled" data-level="7" id="model"><span class="secno">7. </span><span class="content">Model</span><a class="self-link" href="#model"></a></h2>
   <p class="issue" id="issue-d36d1a2e"><a class="self-link" href="#issue-d36d1a2e"></a> A diagram would really help here.</p>
   <h3 class="heading settled" data-level="7.1" id="model-sensor-type"><span class="secno">7.1. </span><span class="content">Sensor Type</span><a class="self-link" href="#model-sensor-type"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sensor-type">sensor type</dfn> has an associated <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-interface" id="ref-for-dfn-interface">interface</a> whose <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-inherited-interfaces" id="ref-for-dfn-inherited-interfaces">inherited interfaces</a> contains <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor②">Sensor</a></code>.</p>
   <p>A <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type②⓪">sensor type</a> has a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">set</a> of <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="associated-sensors">associated sensors</dfn>.</p>
   <p>If a <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type②①">sensor type</a> has more than one <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor②②">sensor</a>,
it must have a set of associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="identifying-parameters">identifying parameters</dfn> to select the right <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor②③">sensor</a> to associate to each new <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor③">Sensor</a></code> objects.</p>
   <p>A <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type②②">sensor type</a> may have a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="default-sensor">default sensor</dfn>.</p>
   <p>A <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type②③">sensor type</a> has an associated <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#enumdef-permissionname" id="ref-for-enumdef-permissionname">PermissionName</a></code>.</p>
   <p class="note" role="note"><span>Note:</span> multiple <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type②④">sensor types</a> may share the same <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#enumdef-permissionname" id="ref-for-enumdef-permissionname①">PermissionName</a></code>.</p>
   <p>A <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type②⑤">sensor type</a> has a <a data-link-type="dfn" href="https://w3c.github.io/permissions/#permission-revocation-algorithm" id="ref-for-permission-revocation-algorithm">permission revocation algorithm</a>.</p>
   <div class="algorithm" data-algorithm="permission revocation algorithm">
    <p>To invoke the <dfn data-dfn-type="dfn" data-lt="generic sensor permission revocation algorithm" data-noexport="" id="generic-sensor-permission-revocation-algorithm">permission revocation algorithm<a class="self-link" href="#generic-sensor-permission-revocation-algorithm"></a></dfn> with <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#enumdef-permissionname" id="ref-for-enumdef-permissionname②">PermissionName</a></code> <var>permission_name</var>, run the following steps:</p>
    <ol>
     <li data-md="">
      <p>For each <var>sensor_type</var> which has an associated <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#enumdef-permissionname" id="ref-for-enumdef-permissionname③">PermissionName</a></code> <var>permission_name</var>:</p>
      <ol>
       <li data-md="">
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>sensor</var> in <var>sensor_type</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">set</a> of <a data-link-type="dfn" href="#associated-sensors" id="ref-for-associated-sensors">associated sensors</a>,</p>
        <ol>
         <li data-md="">
          <p>Invoke <a data-link-type="dfn" href="#revoke-sensor-permission" id="ref-for-revoke-sensor-permission">revoke sensor permission</a> with <var>sensor</var> as argument.</p>
        </ol>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="7.2" id="model-sensor"><span class="secno">7.2. </span><span class="content">Sensor</span><a class="self-link" href="#model-sensor"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="concept-sensor">sensor</dfn> has an associated <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">set</a> of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="activated-sensor-objects">activated sensor objects</dfn>.
This set is initially <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty">empty</a>.</p>
   <p>A <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor②④">sensor</a> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="latest-reading">latest reading</dfn> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">map</a> which holds the latest available <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings③⓪">sensor readings</a>.</p>
   <p>Any time the UA obtains a new <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings③①">sensor reading</a> for a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor②⑤">sensor</a> from the underlying platform,
it invokes <a data-link-type="dfn" href="#update-latest-reading" id="ref-for-update-latest-reading">update latest reading</a> with the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor②⑥">sensor</a> and the <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings③②">sensor reading</a> as arguments.</p>
   <p class="issue" id="issue-504d2531"><a class="self-link" href="#issue-504d2531"></a> does the <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading">latest reading</a> map need to be
tied to an origin?</p>
   <p>The <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading①">latest reading</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①">map</a> contains an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-map-entry">entry</a> whose <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key">key</a> is "timestamp" and
whose <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-value" id="ref-for-map-value">value</a> is a high resolution timestamp of the time
at which the <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading②">latest reading</a> was obtained
expressed in milliseconds that passed since the <a data-link-type="dfn" href="http://w3c.github.io/hr-time/#time-origin" id="ref-for-time-origin">time origin</a>. <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading③">latest reading</a>["timestamp"] is initially set to null,
unless the <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading④">latest reading</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②">map</a> caches a previous <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings③③">reading</a>.</p>
   <p>The other <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-map-entry①">entries</a> of the <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading⑤">latest reading</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③">map</a> hold the values of the different quantities measured by the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor②⑦">sensor</a>.
The <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key①">keys</a> of these <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-map-entry②">entries</a> must match
the <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-attribute" id="ref-for-dfn-attribute">attribute</a> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-identifier" id="ref-for-dfn-identifier">identifier</a> defined by
the <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type②⑥">sensor type</a>'s associated interface.
The return value of the <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-attribute" id="ref-for-dfn-attribute①">attribute</a> getter is
easily obtained by invoking <a data-link-type="dfn" href="#get-value-from-latest-reading" id="ref-for-get-value-from-latest-reading">get value from latest reading</a> with the object implementing the <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type②⑦">sensor type</a>'s associated interface
and the <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-attribute" id="ref-for-dfn-attribute②">attribute</a> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-identifier" id="ref-for-dfn-identifier①">identifier</a> as arguments.</p>
   <p>The <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-value" id="ref-for-map-value①">value</a> of all <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading⑥">latest reading</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-map-entry③">entries</a> is initially set to null.</p>
   <p>A <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor②⑧">sensor</a> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="current-sampling-frequency">current sampling frequency</dfn> which is initially null.</p>
   <p>For a non<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty①">empty</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③">set</a> of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects">activated sensor objects</a> the <a data-link-type="dfn" href="#current-sampling-frequency" id="ref-for-current-sampling-frequency">current sampling frequency</a> is equal to <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="optimal-sampling-frequency">optimal sampling frequency</dfn>, which is estimated
by the UA taking into account <code class="idl"><a data-link-type="idl" href="#dom-sensor-desiredsamplingfrequency-slot" id="ref-for-dom-sensor-desiredsamplingfrequency-slot">desired sampling frequencies</a></code> of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects①">activated</a> <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor④">Sensors</a></code> and <a data-link-type="dfn" href="#sampling-frequency" id="ref-for-sampling-frequency③">sampling frequency</a> bounds defined
by the underlying platform.</p>
   <p class="note" role="note"><span>Note:</span> For example, the UA may estimate <a data-link-type="dfn" href="#optimal-sampling-frequency" id="ref-for-optimal-sampling-frequency">optimal sampling frequency</a> as a Least Common Denominator
(LCD) for a set of <code class="idl"><a data-link-type="idl" href="#dom-sensor-desiredsamplingfrequency-slot" id="ref-for-dom-sensor-desiredsamplingfrequency-slot①">desired sampling frequencies</a></code> capped by <a data-link-type="dfn" href="#sampling-frequency" id="ref-for-sampling-frequency④">sampling frequency</a> bounds defined by the underlying platform.</p>
   <h2 class="heading settled" data-level="8" id="api"><span class="secno">8. </span><span class="content">API</span><a class="self-link" href="#api"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="the-sensor-interface"><span class="secno">8.1. </span><span class="content">The Sensor Interface</span><a class="self-link" href="#the-sensor-interface"></a></h3>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext" id="ref-for-SecureContext">SecureContext</a>, <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed">Exposed</a>=<span class="n">Window</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="sensor"><code>Sensor</code></dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget">EventTarget</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean"><span class="kt">boolean</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean" id="dom-sensor-activated"><code>activated</code></dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="http://w3c.github.io/hr-time/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp">DOMHighResTimeStamp</a>? <dfn class="nv dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" data-readonly="" data-type="DOMHighResTimeStamp?" id="dom-sensor-timestamp"><code>timestamp</code></dfn>;
  <span class="kt">void</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="method" data-export="" data-lt="start()" id="dom-sensor-start"><code>start</code></dfn>();
  <span class="kt">void</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="method" data-export="" data-lt="stop()" id="dom-sensor-stop"><code>stop</code></dfn>();
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler">EventHandler</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" data-type="EventHandler" id="dom-sensor-onreading"><code>onreading</code></dfn>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①">EventHandler</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" data-type="EventHandler" id="dom-sensor-onactivate"><code>onactivate</code></dfn>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②">EventHandler</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" data-type="EventHandler" id="dom-sensor-onerror"><code>onerror</code></dfn>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-sensoroptions"><code>SensorOptions</code></dfn> {
  <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double"><span class="kt">double</span></a>? <dfn class="nv dfn-paneled idl-code" data-dfn-for="SensorOptions" data-dfn-type="dict-member" data-export="" data-type="double? " id="dom-sensoroptions-frequency"><code>frequency</code></dfn>;
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor⑤">Sensor</a></code> object has an associated <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor②⑨">sensor</a>.</p>
   <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source" id="ref-for-task-source">task source</a> for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task">tasks</a> mentioned in this specification is the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sensor-task-source">sensor task source</dfn>.</p>
   <div class="example" id="example-b77a6b87">
    <a class="self-link" href="#example-b77a6b87"></a> In the following example, we construct accelerometer sensor and add <a data-link-type="dfn" href="https://dom.spec.whatwg.org#concept-event-listener" id="ref-for-concept-event-listener">event listeners</a> to get <a data-link-type="dfn" href="https://dom.spec.whatwg.org#concept-event" id="ref-for-concept-event">events</a> for <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor③⓪">sensor</a> activation, error
    conditions and notifications about newly available <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings③④">sensor readings</a>. The example measures
    and logs maximum total acceleration of a device hosting the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor③①">sensor</a>. 
    <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type">event handler event types</a> for the corresponding <a href="#the-sensor-interface"> Sensor Interface</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers">event handler</a> attributes are defined in <a href="#event-handlers">Event handlers</a> section.</p>
<pre class="highlight"><span class="kd">let</span> acl <span class="o">=</span> <span class="k">new</span> Accelerometer<span class="p">({</span>frequency<span class="o">:</span> <span class="mi">30</span><span class="p">});</span>
<span class="kd">let</span> max_magnitude <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
acl<span class="p">.</span>addEventListener<span class="p">(</span><span class="s1">'activate'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=></span> console<span class="p">.</span>log<span class="p">(</span><span class="s1">'Ready to measure.'</span><span class="p">));</span>
acl<span class="p">.</span>addEventListener<span class="p">(</span><span class="s1">'error'</span><span class="p">,</span> error <span class="o">=></span> console<span class="p">.</span>log<span class="p">(</span><span class="s1">'Error: '</span> <span class="o">+</span> error<span class="p">.</span>name<span class="p">));</span>
acl<span class="p">.</span>addEventListener<span class="p">(</span><span class="s1">'reading'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=></span> <span class="p">{</span>
    <span class="kd">let</span> magnitude <span class="o">=</span> Math<span class="p">.</span>hypot<span class="p">(</span>acl<span class="p">.</span>x<span class="p">,</span> acl<span class="p">.</span>y<span class="p">,</span> acl<span class="p">.</span>z<span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span>magnitude <span class="o">></span> max_magnitude<span class="p">)</span> <span class="p">{</span>
        max_magnitude <span class="o">=</span> magnitude<span class="p">;</span>
        console<span class="p">.</span>log<span class="p">(</span><span class="sb">`Max magnitude: </span><span class="si">${</span>max_magnitude<span class="si">}</span><span class="sb"> m/s2`</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
acl<span class="p">.</span>start<span class="p">();</span>
</pre>
   </div>
   <h4 class="heading settled" data-level="8.1.1" id="sensor-lifecycle"><span class="secno">8.1.1. </span><span class="content">Sensor lifecycle</span><a class="self-link" href="#sensor-lifecycle"></a></h4>
   <svg height="79pt" viewBox="0.00 0.00 351.00 78.51" width="351pt" xmlns="http://www.w3.org/2000/svg">
    <g class="graph" transform="scale(1 1) rotate(0) translate(4 74.5122)">
     <title>Sensor lifecycle</title>
     <a href="#dom-sensor-state-slot">
      <g class="node">
       <title>idle</title>
       <path d="M96.997,-64C96.997,-64 66.997,-64 66.997,-64 60.997,-64 54.997,-58 54.997,-52 54.997,-52 54.997,-36 54.997,-36 54.997,-30 60.997,-24 66.997,-24 66.997,-24 96.997,-24 96.997,-24 102.997,-24 108.997,-30 108.997,-36 108.997,-36 108.997,-52 108.997,-52 108.997,-58 102.997,-64 96.997,-64" fill="white" stroke="black"></path>
       <text text-anchor="middle" transform="translate(0,-2)" x="81.997" y="-41.2">idle</text>
      </g>
     </a>
     <a href="#dom-sensor-state-slot">
      <g class="node">
       <title>activating</title>
       <path d="M214.997,-64C214.997,-64 156.997,-64 156.997,-64 150.997,-64 144.997,-58 144.997,-52 144.997,-52 144.997,-36 144.997,-36 144.997,-30 150.997,-24 156.997,-24 156.997,-24 214.997,-24 214.997,-24 220.997,-24 226.997,-30 226.997,-36 226.997,-36 226.997,-52 226.997,-52 226.997,-58 220.997,-64 214.997,-64" fill="white" stroke="black"></path>
       <text text-anchor="middle" transform="translate(0,-2)" x="185.997" y="-41.2">activating</text>
      </g>
     </a>
     <g class="edge">
      <title>idle->activating</title>
      <path d="M109,-38.0296C116.891,-37.4946 125.842,-37.2349 134.762,-37.2507" fill="none" stroke="black"></path>
      <polygon fill="black" points="144.762,-37.3855 134.702,-41.7502 139.762,-37.318 134.763,-37.2506 134.763,-37.2506 134.763,-37.2506 139.762,-37.318 134.823,-32.751 144.762,-37.3855 144.762,-37.3855" stroke="black"></polygon>
      <text text-anchor="middle" transform="translate(0,-4)" x="133.576" y="-20.9121">start()</text>
      <a href="#sensor-start">
       <text text-anchor="middle" transform="translate(0,-4)" x="133.576" y="-20.9121">start()</text>
      </a>
     </g>
     <g class="edge">
      <title>activating->idle</title>
      <path d="M144.762,-50.6145C136.302,-50.8304 127.428,-50.7883 119.129,-50.4883" fill="none" stroke="black"></path>
      <polygon fill="black" points="109,-49.9704 119.217,-45.987 113.993,-50.2258 118.987,-50.4811 118.987,-50.4811 118.987,-50.4811 113.993,-50.2258 118.757,-54.9753 109,-49.9704 109,-49.9704" stroke="black"></polygon>
      <text text-anchor="middle" transform="translate(0,-4)" x="119.656" y="-59.3122">
       <a href="#sensor-onerror">onerror</a>
      </text>
     </g>
     <a href="#dom-sensor-state-slot">
      <g class="node">
       <title>activated</title>
       <path d="M330.997,-40C330.997,-40 274.997,-40 274.997,-40 268.997,-40 262.997,-34 262.997,-28 262.997,-28 262.997,-12 262.997,-12 262.997,-6 268.997,-0 274.997,-0 274.997,-0 330.997,-0 330.997,-0 336.997,-0 342.997,-6 342.997,-12 342.997,-12 342.997,-28 342.997,-28 342.997,-34 336.997,-40 330.997,-40" fill="white" stroke="black"></path>
       <text text-anchor="middle" transform="translate(0,-2)" x="302.997" y="-17.2">activated</text>
      </g>
     </a>
     <g class="edge">
      <title>activating->activated</title>
      <path d="M227.218,-35.606C235.505,-33.8766 244.319,-32.037 252.881,-30.2504" fill="none" stroke="black"></path>
      <polygon fill="black" points="262.767,-28.1871 253.898,-34.6352 257.873,-29.2086 252.978,-30.2301 252.978,-30.2301 252.978,-30.2301 257.873,-29.2086 252.059,-25.825 262.767,-28.1871 262.767,-28.1871" stroke="black"></polygon>
     </g>
     <g class="edge">
      <title>activated->idle</title>
      <path d="M262.74,-17.3829C244.593,-16.1731 226.997,-15 226.997,-15 226.997,-15 144.997,-15 144.997,-15 144.997,-15 132.341,-20.9199 118.465,-27.4103" fill="none" stroke="black"></path>
      <polygon fill="black" points="109.291,-31.7014 116.442,-23.3883 113.82,-29.5829 118.349,-27.4645 118.349,-27.4645 118.349,-27.4645 113.82,-29.5829 120.255,-31.5406 109.291,-31.7014 109.291,-31.7014" stroke="black"></polygon>
      <text text-anchor="middle" transform="translate(0,-4)" x="200" y="5">
       <a href="#sensor-stop">stop()</a>
        / 
       <a href="#sensor-onerror">onerror</a>
      </text>
     </g>
     <g class="node">
      <title>start</title>
      <ellipse cx="11.997" cy="-44" fill="black" rx="7" ry="7" stroke="black"></ellipse>
     </g>
     <g class="edge">
      <title>start->idle</title>
      <path d="M19.2724,-44C25.2754,-44 34.8461,-44 44.6767,-44" fill="none" stroke="black"></path>
      <polygon fill="black" points="54.8766,-44 44.8767,-48.5001 49.8766,-44 44.8766,-44.0001 44.8766,-44.0001 44.8766,-44.0001 49.8766,-44 44.8766,-39.5001 54.8766,-44 54.8766,-44" stroke="black"></polygon>
      <a href="#construct-sensor-object">
       <text text-anchor="middle" transform="translate(0,-4)" x="29.5" y="-52.1333">construct</text>
      </a>
     </g>
    </g>
   </svg>
   <p>When a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor⑥">Sensor</a></code> object is eligible for garbage collection, the user agent must
invoke <a data-link-type="dfn" href="#deactivate-a-sensor-object" id="ref-for-deactivate-a-sensor-object">deactivate a sensor object</a> with this object as argument.</p>
   <h4 class="heading settled" data-level="8.1.2" id="sensor-internal-slots"><span class="secno">8.1.2. </span><span class="content">Sensor internal slots</span><a class="self-link" href="#sensor-internal-slots"></a></h4>
   <p>Instances of <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor⑦">Sensor</a></code> are created
with the internal slots described in the following table:</p>
   <table class="vert data" id="sensor-slots">
    <thead>
     <tr>
      <th>Internal Slot
      <th>Description (non-normative)
    <tbody>
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" id="dom-sensor-state-slot"><code>[[state]]</code></dfn>
      <td>The current state of <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor⑧">Sensor</a></code> object which is one of
                "idle",
                "activating", or
                "activated".
                It is initially "idle". 
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" id="dom-sensor-desiredsamplingfrequency-slot"><code>[[desiredSamplingFrequency]]</code></dfn>
      <td>The requested <a data-link-type="dfn" href="#sampling-frequency" id="ref-for-sampling-frequency⑤">sampling frequency</a>. It is initially unset.
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" id="dom-sensor-lasteventfiredat-slot"><code>[[lastEventFiredAt]]</code></dfn>
      <td>the high resolution timestamp of the latest <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings③⑤">sensor reading</a> that was sent to observers of the <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor⑨">Sensor</a></code> object,
                expressed in milliseconds that passed since the <a data-link-type="dfn" href="http://w3c.github.io/hr-time/#time-origin" id="ref-for-time-origin①">time origin</a>.
                It is initially null. 
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" id="dom-sensor-pendingreadingnotification-slot"><code>[[pendingReadingNotification]]</code></dfn>
      <td>A boolean which indicates whether the observers need to be
                notified after a new <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings③⑥">sensor reading</a> was reported.
                It is initially false.
     <tr>
      <td><dfn class="dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" id="dom-sensor-identifyingparameters-slot"><code>[[identifyingParameters]]</code></dfn>
      <td> A <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type②⑧">sensor type</a>-specific group of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-dictionary-member" id="ref-for-dfn-dictionary-member①">dictionary members</a> used to select the correct <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor③②">sensor</a> to associate to this <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor①⓪">Sensor</a></code> object. 
   </table>
   <h4 class="heading settled" data-level="8.1.3" id="sensor-activated"><span class="secno">8.1.3. </span><span class="content">Sensor.activated</span><a class="self-link" href="#sensor-activated"></a></h4>
   <div class="algorithm" data-algorithm="is sensor activated">
    <p>The getter of the <code class="idl"><a class="idl-code" data-link-type="attribute" href="#dom-sensor-activated" id="ref-for-dom-sensor-activated">activated</a></code> attribute must run these steps:</p>
    <ol>
     <li data-md="">
      <p>If <emu-val>this</emu-val>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot">[[state]]</a></code> is "activated",
  return true.</p>
     <li data-md="">
      <p>Otherwise, return false.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="8.1.4" id="sensor-timestamp"><span class="secno">8.1.4. </span><span class="content">Sensor.timestamp</span><a class="self-link" href="#sensor-timestamp"></a></h4>
   <p>The getter of the <code class="idl"><a class="idl-code" data-link-type="attribute" href="#dom-sensor-timestamp" id="ref-for-dom-sensor-timestamp">timestamp</a></code> attribute returns
the result of invoking <a data-link-type="dfn" href="#get-value-from-latest-reading" id="ref-for-get-value-from-latest-reading①">get value from latest reading</a> with <emu-val>this</emu-val> and "timestamp" as arguments.</p>
   <h4 class="heading settled" data-level="8.1.5" id="sensor-start"><span class="secno">8.1.5. </span><span class="content">Sensor.start()</span><a class="self-link" href="#sensor-start"></a></h4>
   <div class="algorithm" data-algorithm="to start a sensor">
    <p>The <code class="idl"><a data-link-type="idl" href="#dom-sensor-start" id="ref-for-dom-sensor-start">start()</a></code> method must run these steps:</p>
    <ol>
     <li data-md="">
      <p>Let <var>sensor_state</var> be the value of <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot①">[[state]]</a></code>.</p>
     <li data-md="">
      <p>If <var>sensor_state</var> is either "activating"
  or "activated", then return.</p>
     <li data-md="">
      <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot②">[[state]]</a></code> to "activating".</p>
     <li data-md="">
      <p>Run these sub-steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>:</p>
      <ol>
       <li data-md="">
        <p>let <var>connected</var> be the result of invoking <a data-link-type="dfn" href="#connect-to-sensor" id="ref-for-connect-to-sensor">connect to sensor</a>.</p>
       <li data-md="">
        <p>If <var>connected</var> is false, then</p>
        <ol>
         <li data-md="">
          <p>Let <var>e</var> be the result of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-create-exception" id="ref-for-dfn-create-exception">creating</a> a
  "<code class="idl"><a class="idl-code" data-link-type="exception" href="https://heycam.github.io/webidl/#notreadableerror" id="ref-for-notreadableerror">NotReadableError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>.</p>
         <li data-md="">
          <p>Queue a task to run <a data-link-type="dfn" href="#notify-error" id="ref-for-notify-error">notify error</a> with <var>e</var> and <var>sensor_instance</var> as arguments.</p>
         <li data-md="">
          <p>Return.</p>
        </ol>
       <li data-md="">
        <p>Let <var>permission_state</var> be the result of invoking <a data-link-type="dfn" href="#request-sensor-access" id="ref-for-request-sensor-access">request sensor access</a> with <var>sensor_instance</var> as argument.</p>
       <li data-md="">
        <p>If <var>permission_state</var> is "granted",</p>
        <ol>
         <li data-md="">
          <p>Invoke <a data-link-type="dfn" href="#activate-a-sensor-object" id="ref-for-activate-a-sensor-object">activate a sensor object</a> with <var>sensor_instance</var> as argument.</p>
        </ol>
       <li data-md="">
        <p>Otherwise, if <var>permission_state</var> is "denied",</p>
        <ol>
         <li data-md="">
          <p>let <var>e</var> be the result of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-create-exception" id="ref-for-dfn-create-exception①">creating</a> a "<code class="idl"><a class="idl-code" data-link-type="exception" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror">NotAllowedError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code>.</p>
         <li data-md="">
          <p>Queue a task to run <a data-link-type="dfn" href="#notify-error" id="ref-for-notify-error①">notify error</a> with <var>e</var> and <var>sensor_instance</var> as arguments.</p>
        </ol>
      </ol>
    </ol>
   </div>
   <h4 class="heading settled" data-level="8.1.6" id="sensor-stop"><span class="secno">8.1.6. </span><span class="content">Sensor.stop()</span><a class="self-link" href="#sensor-stop"></a></h4>
   <div class="algorithm" data-algorithm="to stop a sensor">
    <p>The <code class="idl"><a data-link-type="idl" href="#dom-sensor-stop" id="ref-for-dom-sensor-stop">stop()</a></code> method must run these steps:</p>
    <ol>
     <li data-md="">
      <p>If <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot③">[[state]]</a></code> is "idle", then return.</p>
     <li data-md="">
      <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot④">[[state]]</a></code> to "idle".</p>
     <li data-md="">
      <p>Run these sub-steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>:</p>
      <ol>
       <li data-md="">
        <p>Invoke <a data-link-type="dfn" href="#deactivate-a-sensor-object" id="ref-for-deactivate-a-sensor-object①">deactivate a sensor object</a> with <var>sensor_instance</var> as argument.</p>
      </ol>
    </ol>
   </div>
   <h4 class="heading settled" data-level="8.1.7" id="sensor-onreading"><span class="secno">8.1.7. </span><span class="content">Sensor.onreading</span><a class="self-link" href="#sensor-onreading"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#dom-sensor-onreading" id="ref-for-dom-sensor-onreading">onreading</a></code> is an <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler③">EventHandler</a></code> which is called
to notify that new <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings③⑦">reading</a> is available.</p>
   <h4 class="heading settled" data-level="8.1.8" id="sensor-onactivate"><span class="secno">8.1.8. </span><span class="content">Sensor.onactivate</span><a class="self-link" href="#sensor-onactivate"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#dom-sensor-onactivate" id="ref-for-dom-sensor-onactivate">onactivate</a></code> is an <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler④">EventHandler</a></code> which is called when <emu-val>this</emu-val>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot⑤">[[state]]</a></code> transitions from "activating" to "activated".</p>
   <h4 class="heading settled" data-level="8.1.9" id="sensor-onerror"><span class="secno">8.1.9. </span><span class="content">Sensor.onerror</span><a class="self-link" href="#sensor-onerror"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#dom-sensor-onerror" id="ref-for-dom-sensor-onerror">onerror</a></code> is an <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler⑤">EventHandler</a></code> which is called whenever
an <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-exception-type" id="ref-for-dfn-exception-type">exception</a> cannot be handled synchronously.</p>
   <h4 class="heading settled" data-level="8.1.10" id="event-handlers"><span class="secno">8.1.10. </span><span class="content">Event handlers</span><a class="self-link" href="#event-handlers"></a></h4>
   <p>The following are the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers" id="ref-for-event-handlers①">event handlers</a> (and their corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type" id="ref-for-event-handler-event-type①">event handler event types</a>)
that must be supported as attributes by the objects implementing the <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor①①">Sensor</a></code> interface:</p>
   <table class="def">
    <thead>
     <tr>
      <th>event handler
      <th>event handler event type
    <tbody>
     <tr>
      <td><strong><code>onreading</code></strong>
      <td><code>reading</code>
     <tr>
      <td><strong><code>onactivate</code></strong>
      <td><code>activate</code>
     <tr>
      <td><strong><code>onerror</code></strong>
      <td><code>error</code>
   </table>
   <h3 class="heading settled" data-level="8.2" id="the-sensor-error-event-interface"><span class="secno">8.2. </span><span class="content">The SensorErrorEvent Interface</span><a class="self-link" href="#the-sensor-error-event-interface"></a></h3>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext" id="ref-for-SecureContext①">SecureContext</a>, <dfn class="nv idl-code" data-dfn-for="SensorErrorEvent" data-dfn-type="constructor" data-export="" data-lt="SensorErrorEvent(type, errorEventInitDict)" id="dom-sensorerrorevent-sensorerrorevent"><code>Constructor</code><a class="self-link" href="#dom-sensorerrorevent-sensorerrorevent"></a></dfn>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString"><span class="kt">DOMString</span></a> <dfn class="nv idl-code" data-dfn-for="SensorErrorEvent/SensorErrorEvent(type, errorEventInitDict)" data-dfn-type="argument" data-export="" id="dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-type"><code>type</code><a class="self-link" href="#dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-type"></a></dfn>, <a class="n" data-link-type="idl-name" href="#dictdef-sensorerroreventinit" id="ref-for-dictdef-sensorerroreventinit">SensorErrorEventInit</a> <dfn class="nv idl-code" data-dfn-for="SensorErrorEvent/SensorErrorEvent(type, errorEventInitDict)" data-dfn-type="argument" data-export="" id="dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-erroreventinitdict"><code>errorEventInitDict</code><a class="self-link" href="#dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-erroreventinitdict"></a></dfn>), <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①">Exposed</a>=<span class="n">Window</span>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="sensorerrorevent"><code>SensorErrorEvent</code></dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-Error" id="ref-for-idl-Error"><span class="kt">Error</span></a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="SensorErrorEvent" data-dfn-type="attribute" data-export="" data-readonly="" data-type="Error" id="dom-sensorerrorevent-error"><code>error</code></dfn>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-sensorerroreventinit"><code>SensorErrorEventInit</code></dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit" id="ref-for-dictdef-eventinit">EventInit</a> {
  <span class="kt">required</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-Error" id="ref-for-idl-Error①"><span class="kt">Error</span></a> <dfn class="nv idl-code" data-dfn-for="SensorErrorEventInit" data-dfn-type="dict-member" data-export="" data-type="Error " id="dom-sensorerroreventinit-error"><code>error</code><a class="self-link" href="#dom-sensorerroreventinit-error"></a></dfn>;
};
</pre>
   <h4 class="heading settled" data-level="8.2.1" id="sensor-error-event-error"><span class="secno">8.2.1. </span><span class="content">SensorErrorEvent.error</span><a class="self-link" href="#sensor-error-event-error"></a></h4>
   <p>Gets the <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-Error" id="ref-for-idl-Error②">Error</a></code> object passed to <code class="idl"><a data-link-type="idl" href="#dictdef-sensorerroreventinit" id="ref-for-dictdef-sensorerroreventinit①">SensorErrorEventInit</a></code>.</p>
   <h2 class="heading settled" data-level="9" id="abstract-operations"><span class="secno">9. </span><span class="content">Abstract Operations</span><a class="self-link" href="#abstract-operations"></a></h2>
   <h3 class="heading settled" data-dfn-type="dfn" data-export="" data-level="9.1" data-lt="Construct sensor object" id="construct-sensor-object"><span class="secno">9.1. </span><span class="content">Construct sensor object</span><a class="self-link" href="#construct-sensor-object"></a></h3>
   <div class="algorithm" data-algorithm="construct sensor object">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>options</var>, a <code class="idl"><a data-link-type="idl" href="#dictdef-sensoroptions" id="ref-for-dictdef-sensoroptions">SensorOptions</a></code> object.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>A <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor①②">Sensor</a></code> object.</p>
    </dl>
    <ol>
     <li data-md="">
      <p>If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" id="ref-for-current-settings-object">current settings object</a> is not a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#secure-context" id="ref-for-secure-context①">secure context</a>, then:</p>
      <ol>
       <li data-md="">
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw">throw</a> a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror" id="ref-for-securityerror">SecurityError</a></code>.</p>
      </ol>
     <li data-md="">
      <p>If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context" id="ref-for-browsing-context①">browsing context</a> is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑤">top-level browsing context</a>, then:</p>
      <ol>
       <li data-md="">
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw" id="ref-for-dfn-throw①">throw</a> a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror" id="ref-for-securityerror①">SecurityError</a></code>.</p>
      </ol>
     <li data-md="">
      <p>Let <var>sensor_instance</var> be a new <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor①③">Sensor</a></code> object,</p>
     <li data-md="">
      <p>If <var>options</var>.<code class="idl"><a class="idl-code" data-link-type="dict-member" href="#dom-sensoroptions-frequency" id="ref-for-dom-sensoroptions-frequency">frequency</a></code> is <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-present" id="ref-for-dfn-present">present</a>, then</p>
      <ol>
       <li data-md="">
        <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-desiredsamplingfrequency-slot" id="ref-for-dom-sensor-desiredsamplingfrequency-slot②">[[desiredSamplingFrequency]]</a></code> to <var>options</var>.<code class="idl"><a class="idl-code" data-link-type="dict-member" href="#dom-sensoroptions-frequency" id="ref-for-dom-sensoroptions-frequency①">frequency</a></code>.</p>
      </ol>
      <p class="note" role="note"><span>Note:</span> there is not guarantee that the requested <var>options</var>.<code class="idl"><a class="idl-code" data-link-type="dict-member" href="#dom-sensoroptions-frequency" id="ref-for-dom-sensoroptions-frequency②">frequency</a></code> can be respected. The actual <a data-link-type="dfn" href="#frequency" id="ref-for-frequency②">frequency</a> can be calculated using <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor①④">Sensor</a></code> <code class="idl"><a class="idl-code" data-link-type="attribute" href="#dom-sensor-timestamp" id="ref-for-dom-sensor-timestamp①">timestamp</a></code> attributes.</p>
     <li data-md="">
      <p>If <a data-link-type="dfn" href="#identifying-parameters" id="ref-for-identifying-parameters">identifying parameters</a> in <var>options</var> are set, then:</p>
      <ol>
       <li data-md="">
        <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-identifyingparameters-slot" id="ref-for-dom-sensor-identifyingparameters-slot">[[identifyingParameters]]</a></code> to <a data-link-type="dfn" href="#identifying-parameters" id="ref-for-identifying-parameters①">identifying parameters</a>.</p>
      </ol>
     <li data-md="">
      <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot⑥">[[state]]</a></code> to "idle".</p>
     <li data-md="">
      <p>Return <var>sensor_instance</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-export="" data-level="9.2" data-lt="Connect to sensor" id="connect-to-sensor"><span class="secno">9.2. </span><span class="content">Connect to sensor</span></h3>
   <div class="algorithm" data-algorithm="connect to sensor">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor①⑤">Sensor</a></code> object.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>True if sensor instance was associated with a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor③③">sensor</a>,
 false otherwise.</p>
    </dl>
    <ol>
     <li data-md="">
      <p>If <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-identifyingparameters-slot" id="ref-for-dom-sensor-identifyingparameters-slot①">[[identifyingParameters]]</a></code> is set and <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-identifyingparameters-slot" id="ref-for-dom-sensor-identifyingparameters-slot②">[[identifyingParameters]]</a></code> allows
  a unique <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor③④">sensor</a> to be identified, then:</p>
      <ol>
       <li data-md="">
        <p>let <var>sensor</var> be that <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor③⑤">sensor</a>,</p>
       <li data-md="">
        <p>associate <var>sensor_instance</var> with <var>sensor</var>.</p>
       <li data-md="">
        <p>Return true.</p>
      </ol>
     <li data-md="">
      <p>If the <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type②⑨">sensor type</a> of <var>sensor_instance</var> has an associated <a data-link-type="dfn" href="#default-sensor" id="ref-for-default-sensor">default sensor</a> and there is a corresponding <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor③⑥">sensor</a> on the device, then</p>
      <ol>
       <li data-md="">
        <p>associate <var>sensor_instance</var> with <a data-link-type="dfn" href="#default-sensor" id="ref-for-default-sensor①">default sensor</a>.</p>
       <li data-md="">
        <p>Return true.</p>
      </ol>
     <li data-md="">
      <p>Return false.</p>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.3" data-lt="Activate a sensor object" data-noexport="" id="activate-a-sensor-object"><span class="secno">9.3. </span><span class="content">Activate a sensor object</span></h3>
   <div class="algorithm" data-algorithm="activate a sensor object">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor①⑥">Sensor</a></code> object.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>None</p>
    </dl>
    <ol>
     <li data-md="">
      <p>Let <var>sensor</var> be the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor③⑦">sensor</a> associated with <var>sensor_instance</var>.</p>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">Append</a> <var>sensor_instance</var> to <var>sensor</var>’s set of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects②">activated sensor objects</a>.</p>
     <li data-md="">
      <p>Invoke <a data-link-type="dfn" href="#set-sensor-settings" id="ref-for-set-sensor-settings">set sensor settings</a> with <var>sensor</var> as argument.</p>
     <li data-md="">
      <p>Queue a task to run <a data-link-type="dfn" href="#notify-activated-state" id="ref-for-notify-activated-state">notify activated state</a> with <var>sensor_instance</var> as an argument.</p>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.4" data-lt="Deactivate a sensor object" data-noexport="" id="deactivate-a-sensor-object"><span class="secno">9.4. </span><span class="content">Deactivate a sensor object</span></h3>
   <div class="algorithm" data-algorithm="deactivate a sensor object">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor①⑦">Sensor</a></code> object.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>None</p>
    </dl>
    <ol>
     <li data-md="">
      <p>Remove all <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task①">tasks</a> associated with <var>sensor_instance</var> from the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue" id="ref-for-task-queue">task queue</a> associated
  with <a data-link-type="dfn" href="#sensor-task-source" id="ref-for-sensor-task-source">sensor task source</a>.</p>
     <li data-md="">
      <p>Let <var>sensor</var> be the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor③⑧">sensor</a> associated with <var>sensor_instance</var>.</p>
     <li data-md="">
      <p>If <var>sensor</var>’s set of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects③">activated sensor objects</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contains</a> <var>sensor_instance</var>,</p>
      <ol>
       <li data-md="">
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">Remove</a> <var>sensor_instance</var> from <var>sensor</var>’s set of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects④">activated sensor objects</a>.</p>
       <li data-md="">
        <p>Invoke <a data-link-type="dfn" href="#set-sensor-settings" id="ref-for-set-sensor-settings①">set sensor settings</a> with <var>sensor</var> as argument.</p>
       <li data-md="">
        <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-pendingreadingnotification-slot" id="ref-for-dom-sensor-pendingreadingnotification-slot">[[pendingReadingNotification]]</a></code> to false.</p>
       <li data-md="">
        <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-lasteventfiredat-slot" id="ref-for-dom-sensor-lasteventfiredat-slot">[[lastEventFiredAt]]</a></code> to null.</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.5" data-lt="Revoke sensor permission" data-noexport="" id="revoke-sensor-permission"><span class="secno">9.5. </span><span class="content">Revoke sensor permission</span></h3>
   <div class="algorithm" data-algorithm="revoke sensor permission">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor</var>, a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor③⑨">sensor</a>.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>None</p>
    </dl>
    <ol>
     <li data-md="">
      <p>let <var>activated_sensors</var> be <var>sensor</var>’s associated <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set④">set</a> of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects⑤">activated sensor objects</a>.</p>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <var>s</var> of <var>activated_sensors</var>,</p>
      <ol>
       <li data-md="">
        <p>Invoke <a data-link-type="dfn" href="#deactivate-a-sensor-object" id="ref-for-deactivate-a-sensor-object②">deactivate a sensor object</a> with <var>s</var> as argument.</p>
       <li data-md="">
        <p>let <var>e</var> be the result of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-create-exception" id="ref-for-dfn-create-exception②">creating</a> a "<code class="idl"><a class="idl-code" data-link-type="exception" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror①">NotAllowedError</a></code>" <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code>.</p>
       <li data-md="">
        <p>Queue a task to run <a data-link-type="dfn" href="#notify-error" id="ref-for-notify-error②">notify error</a> with <var>e</var> and <var>s</var> as arguments.</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.6" data-lt="Set sensor settings" data-noexport="" id="set-sensor-settings"><span class="secno">9.6. </span><span class="content">Set sensor settings</span></h3>
   <div class="algorithm" data-algorithm="set sensor settings">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor</var>, a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor④⓪">sensor</a>.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>None</p>
    </dl>
    <ol>
     <li data-md="">
      <p>If <var>sensor</var>’s set of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects⑥">activated sensor objects</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty②">is empty</a>,</p>
      <ol>
       <li data-md="">
        <p>Set <a data-link-type="dfn" href="#current-sampling-frequency" id="ref-for-current-sampling-frequency①">current sampling frequency</a> to null.</p>
       <li data-md="">
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate">For each</a> <var>key</var> → <var>value</var> of <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading⑦">latest reading</a>.</p>
        <ol>
         <li data-md="">
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set">Set</a> <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading⑧">latest reading</a>[<var>key</var>] to null.</p>
        </ol>
       <li data-md="">
        <p>Update the user-agent-specific way in which <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings③⑧">sensor readings</a> are obtained from <var>sensor</var> to no longer provide <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings③⑨">readings</a>.</p>
       <li data-md="">
        <p>Return.</p>
      </ol>
     <li data-md="">
      <p>Set <a data-link-type="dfn" href="#current-sampling-frequency" id="ref-for-current-sampling-frequency②">current sampling frequency</a> to <a data-link-type="dfn" href="#optimal-sampling-frequency" id="ref-for-optimal-sampling-frequency①">optimal sampling frequency</a>.</p>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.7" data-lt="Update latest reading" data-noexport="" id="update-latest-reading"><span class="secno">9.7. </span><span class="content">Update latest reading</span></h3>
   <div class="algorithm" data-algorithm="update latest reading">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor</var>, a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor④①">sensor</a>.</p>
     <dd data-md="">
      <p><var>reading</var>, a <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings④⓪">sensor reading</a>.</p>
    </dl>
    <p class="issue" id="issue-d62b5d37"><a class="self-link" href="#issue-d62b5d37"></a> The timestamp needs to be specified more precisely,
    see <a href="https://github.com/w3c/sensors/issues/155">issue #155</a>.</p>
    <dl>
     <dt data-md="">output
     <dd data-md="">
      <p>None</p>
    </dl>
    <ol>
     <li data-md="">
      <p>If the result of invoking the <a data-link-type="dfn" href="#security-check" id="ref-for-security-check②">security check</a> is "insecure",
  then return.</p>
      <div class="issue no-marker" id="issue-d41d8cd9">
       <a class="self-link" href="#issue-d41d8cd9"></a><a class="marker" href="https://github.com/w3c/sensors/issues/223">Issue #223 on GitHub: “Should a "suspended" state be added”</a>
       <p>Sensors would be in this state when the security check would return "insecure".</p>
       <p>Additionally, or alternatively, an "suspend" event could be fired in such cases.</p>
       <p>Follow-up questions:</p>
       <ul>
        <li>What should the "activated" attribute getter return in such cases?
        <li>Do we need a "state" or "status" attribute instead?
        <li>Should an "activate" event be fired once the security check returns "secure" again?
        <li>Etc., etc.
       </ul>
      </div>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate①">For each</a> <var>key</var> → <var>value</var> of <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading⑨">latest reading</a>.</p>
      <ol>
       <li data-md="">
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set①">Set</a> <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading①⓪">latest reading</a>[<var>key</var>] to the corresponding
  value of <var>reading</var>.</p>
      </ol>
      <p class="issue" id="issue-0a097748"><a class="self-link" href="#issue-0a097748"></a> Maybe compare <var>value</var> with corresponding
  value of <var>reading</var> to see if there’s a change
  that needs to be propagated.</p>
     <li data-md="">
      <p>let <var>activated_sensors</var> be <var>sensor</var>’s associated <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set⑤">set</a> of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects⑦">activated sensor objects</a>.</p>
     <li data-md="">
      <p>Run these sub-steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel②">in parallel</a>:</p>
      <ol>
       <li data-md="">
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">For each</a> <var>s</var> in <var>activated_sensors</var>,</p>
        <ol>
         <li data-md="">
          <p>Invoke <a data-link-type="dfn" href="#report-latest-reading-updated" id="ref-for-report-latest-reading-updated">report latest reading updated</a> with <var>s</var> as an argument.</p>
        </ol>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.8" data-lt="Security check" data-noexport="" id="security-check"><span class="secno">9.8. </span><span class="content">Security check</span></h3>
   <div class="algorithm" data-algorithm="security check">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p>None</p>
     <dt data-md="">output
     <dd data-md="">
      <p>A string whose value is either "secure" or "insecure".</p>
    </dl>
    <ol>
     <li data-md="">
      <p>Let <var>document</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑥">top-level browsing context</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document">active document</a>.</p>
     <li data-md="">
      <p>Let <var>current_visibility_state</var> be the result of running
  the <a data-link-type="dfn" href="https://w3c.github.io/page-visibility#dfn-steps-to-determine-the-visibility-state" id="ref-for-dfn-steps-to-determine-the-visibility-state①">steps to determine the visibility state</a> of <var>document</var>.</p>
     <li data-md="">
      <p>If <var>current_visibility_state</var> is not "visible",
  then return "insecure".</p>
     <li data-md="">
      <p>If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#currently-focused-area-of-a-top-level-browsing-context" id="ref-for-currently-focused-area-of-a-top-level-browsing-context">currently focused area</a> of the current <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑦">top-level browsing context</a> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context" id="ref-for-nested-browsing-context①">nested browsing context</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#active-document" id="ref-for-active-document①">active document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2" id="ref-for-origin-2①">origin</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin-domain" id="ref-for-same-origin-domain">same origin-domain</a> as <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2" id="ref-for-origin-2②">origin</a>,
  then return "insecure".</p>
     <li data-md="">
      <p>Let <var>has_focus</var> be the result of running the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#has-focus-steps" id="ref-for-has-focus-steps">has focus steps</a> with <var>document</var> as argument.</p>
     <li data-md="">
      <p>If <var>has_focus</var> is false, then return "insecure".</p>
     <li data-md="">
      <p>If the user agent loses focus, then return "insecure".</p>
      <div class="issue no-marker" id="issue-d41d8cd9①">
       <a class="self-link" href="#issue-d41d8cd9①"></a><a class="marker" href="https://github.com/whatwg/html/issues/2716">Issue #2716 on GitHub: “Focus state is unspecified when user agent itself loses focus.”</a>
       <p>This makes it difficult to normatively stop certain behaviors (such as collecting sensor readings) when the app is unfocused but stays visible.</p>
       <p>This can notably allow PIN skimming attacks using sensors.</p>
      </div>
     <li data-md="">
      <p>Return "secure".</p>
    </ol>
   </div>
   <p class="note" role="note"><span>Note:</span> user agents are encouraged to stop sensor sampling
when <a data-link-type="dfn" href="#security-check" id="ref-for-security-check③">security check</a> would return "insecure"
in order to reduce resource consumption, notably battery usage.</p>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.9" data-lt="Find the reporting frequency of a sensor object" data-noexport="" id="find-the-reporting-frequency-of-a-sensor-object"><span class="secno">9.9. </span><span class="content">Find the reporting frequency of a sensor object</span></h3>
   <div class="algorithm" data-algorithm="find the reporting frequency of a sensor object">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor①⑧">Sensor</a></code> object.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>A <a data-link-type="dfn" href="#frequency" id="ref-for-frequency③">frequency</a>.</p>
    </dl>
    <ol>
     <li data-md="">
      <p>Let <var>frequency</var> be null.</p>
     <li data-md="">
      <p>Let <var>f</var> be <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-desiredsamplingfrequency-slot" id="ref-for-dom-sensor-desiredsamplingfrequency-slot③">[[desiredSamplingFrequency]]</a></code>.</p>
      <ol>
       <li data-md="">
        <p>if <var>f</var> is set,</p>
        <ol>
         <li data-md="">
          <p>set <var>frequency</var> to <var>f</var> capped by the upper and lower <a data-link-type="dfn" href="#current-sampling-frequency" id="ref-for-current-sampling-frequency③">current sampling frequency</a> bounds for the associated <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor④②">sensor</a>.</p>
        </ol>
       <li data-md="">
        <p>Otherwise,</p>
        <ol>
         <li data-md="">
          <p>user agent can assign <var>frequency</var> to an appropriate value.</p>
        </ol>
      </ol>
     <li data-md="">
      <p>return <var>frequency</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.10" data-lt="Report latest reading updated" data-noexport="" id="report-latest-reading-updated"><span class="secno">9.10. </span><span class="content">Report latest reading updated</span></h3>
   <div class="algorithm" data-algorithm="report latest reading updated">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor①⑨">Sensor</a></code> object.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>None</p>
    </dl>
    <ol>
     <li data-md="">
      <p>If <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-pendingreadingnotification-slot" id="ref-for-dom-sensor-pendingreadingnotification-slot①">[[pendingReadingNotification]]</a></code> is true,</p>
      <ol>
       <li data-md="">
        <p>Return.</p>
      </ol>
     <li data-md="">
      <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-pendingreadingnotification-slot" id="ref-for-dom-sensor-pendingreadingnotification-slot②">[[pendingReadingNotification]]</a></code> to true.</p>
     <li data-md="">
      <p>Let <var>lastReportedTimestamp</var> be the value of <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-lasteventfiredat-slot" id="ref-for-dom-sensor-lasteventfiredat-slot①">[[lastEventFiredAt]]</a></code>.</p>
     <li data-md="">
      <p>If <var>lastReportedTimestamp</var> is not set</p>
      <ol>
       <li data-md="">
        <p>Queue a task to run <a data-link-type="dfn" href="#notify-new-reading" id="ref-for-notify-new-reading">notify new reading</a> with <var>sensor_instance</var> as an argument.</p>
       <li data-md="">
        <p>Return.</p>
      </ol>
     <li data-md="">
      <p>Let <var>reportingFrequency</var> be result of invoking <a data-link-type="dfn" href="#find-the-reporting-frequency-of-a-sensor-object" id="ref-for-find-the-reporting-frequency-of-a-sensor-object">Find the reporting frequency of a sensor object</a>.</p>
     <li data-md="">
      <p>If <var>reportingFrequency</var> is null</p>
      <ol>
       <li data-md="">
        <p>Queue a task to run <a data-link-type="dfn" href="#notify-new-reading" id="ref-for-notify-new-reading①">notify new reading</a> with <var>sensor_instance</var> as an argument.</p>
       <li data-md="">
        <p>Return.</p>
      </ol>
     <li data-md="">
      <p>Let <var>reportingInterval</var> be the result of 1 / <var>reportingFrequency</var>.</p>
     <li data-md="">
      <p>Let <var>timestampDelta</var> be the result of <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading①①">latest reading</a>["timestamp"] - <var>lastReportedTimestamp</var>.</p>
     <li data-md="">
      <p>If <var>timestampDelta</var> is greater than or equal to <var>reportingInterval</var></p>
      <ol>
       <li data-md="">
        <p>Queue a task to run <a data-link-type="dfn" href="#notify-new-reading" id="ref-for-notify-new-reading②">notify new reading</a> with <var>sensor_instance</var> as an argument.</p>
       <li data-md="">
        <p>Return.</p>
      </ol>
     <li data-md="">
      <p>Let <var>deferUpdateTime</var> be the result of <var>reportingInterval</var> - <var>timestampDelta</var>.</p>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#spin-the-event-loop" id="ref-for-spin-the-event-loop">Spin the event loop</a> for a period of time equal to <var>deferUpdateTime</var>.</p>
     <li data-md="">
      <p>If <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-pendingreadingnotification-slot" id="ref-for-dom-sensor-pendingreadingnotification-slot③">[[pendingReadingNotification]]</a></code> is true,</p>
      <ol>
       <li data-md="">
        <p>Queue a task to run <a data-link-type="dfn" href="#notify-new-reading" id="ref-for-notify-new-reading③">notify new reading</a> with <var>sensor_instance</var> as an argument.</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.11" data-lt="Notify new reading" data-noexport="" id="notify-new-reading"><span class="secno">9.11. </span><span class="content">Notify new reading</span></h3>
   <div class="algorithm" data-algorithm="notify new reading">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor②⓪">Sensor</a></code> object.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>None</p>
    </dl>
    <ol>
     <li data-md="">
      <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-pendingreadingnotification-slot" id="ref-for-dom-sensor-pendingreadingnotification-slot④">[[pendingReadingNotification]]</a></code> to false.</p>
     <li data-md="">
      <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-lasteventfiredat-slot" id="ref-for-dom-sensor-lasteventfiredat-slot②">[[lastEventFiredAt]]</a></code> to <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading①②">latest reading</a>["timestamp"].</p>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire">Fire an event</a> named "reading" at <var>sensor_instance</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.12" data-lt="Notify activated state" data-noexport="" id="notify-activated-state"><span class="secno">9.12. </span><span class="content">Notify activated state</span></h3>
   <div class="algorithm" data-algorithm="notify activated state">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor②①">Sensor</a></code> object.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>None</p>
    </dl>
    <ol>
     <li data-md="">
      <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot⑦">[[state]]</a></code> to "activated".</p>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire①">Fire an event</a> named "activate" at <var>sensor_instance</var>.</p>
     <li data-md="">
      <p>Let <var>sensor</var> be the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor④③">sensor</a> associated with <var>sensor_instance</var>.</p>
     <li data-md="">
      <p>If <var>sensor</var>’s <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading①③">latest reading</a>["timestamp"] is not null,</p>
      <ol>
       <li data-md="">
        <p>Queue a task to run <a data-link-type="dfn" href="#notify-new-reading" id="ref-for-notify-new-reading④">notify new reading</a> with <var>sensor_instance</var> as an argument.</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.13" data-lt="Notify error" data-noexport="" id="notify-error"><span class="secno">9.13. </span><span class="content">Notify error</span></h3>
   <div class="algorithm" data-algorithm="notify error">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor②②">Sensor</a></code> object.</p>
     <dd data-md="">
      <p><var>error</var>, an <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-exception" id="ref-for-dfn-exception">exception</a>.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>None</p>
    </dl>
    <ol>
     <li data-md="">
      <p>Set <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot⑧">[[state]]</a></code> to "idle".</p>
     <li data-md="">
      <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire②">Fire an event</a> named "error" at <var>sensor_instance</var> using <code class="idl"><a data-link-type="idl" href="#sensorerrorevent" id="ref-for-sensorerrorevent">SensorErrorEvent</a></code> with its <code class="idl"><a class="idl-code" data-link-type="attribute" href="#dom-sensorerrorevent-error" id="ref-for-dom-sensorerrorevent-error">error</a></code> attribute initialized to <var>error</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.14" data-lt="Get value from latest reading" data-noexport="" id="get-value-from-latest-reading"><span class="secno">9.14. </span><span class="content">Get value from latest reading</span></h3>
   <div class="algorithm" data-algorithm="get value from latest reading">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor②③">Sensor</a></code> object.</p>
     <dd data-md="">
      <p><var>key</var>, a string representing the name of the value.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>A <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings④①">sensor reading</a> value or null.</p>
    </dl>
    <ol>
     <li data-md="">
      <p>If <var>sensor_instance</var>.<code class="idl"><a data-link-type="idl" href="#dom-sensor-state-slot" id="ref-for-dom-sensor-state-slot⑨">[[state]]</a></code> is "activated",</p>
      <ol>
       <li data-md="">
        <p>Let <var>readings</var> be the <a data-link-type="dfn" href="#latest-reading" id="ref-for-latest-reading①④">latest reading</a> of <var>sensor_instance</var>’s related <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor④④">sensor</a>.</p>
       <li data-md="">
        <p>Return <var>readings</var>[<var>key</var>].</p>
      </ol>
     <li data-md="">
      <p>Otherwise, return null.</p>
    </ol>
   </div>
   <h3 class="heading settled dfn-paneled" data-dfn-type="dfn" data-level="9.15" data-lt="Request sensor access" data-noexport="" id="request-sensor-access"><span class="secno">9.15. </span><span class="content">Request sensor access</span></h3>
   <div class="algorithm" data-algorithm="request sensor access">
    <dl>
     <dt data-md="">input
     <dd data-md="">
      <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor②④">Sensor</a></code> object.</p>
     <dt data-md="">output
     <dd data-md="">
      <p>A <a data-link-type="dfn" href="https://w3c.github.io/permissions/#permission-state" id="ref-for-permission-state">permission state</a>.</p>
    </dl>
    <ol>
     <li data-md="">
      <p>Let <var>sensor</var> be the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor④⑤">sensor</a> associated with <var>sensor_instance</var>.</p>
     <li data-md="">
      <p>Let <var>permission_name</var> be the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#enumdef-permissionname" id="ref-for-enumdef-permissionname④">PermissionName</a></code> associated with <var>sensor</var>.</p>
     <li data-md="">
      <p>Let <var>state</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/permissions/#request-permission-to-use" id="ref-for-request-permission-to-use">requesting permission to use</a> <var>permission_name</var>.</p>
     <li data-md="">
      <p>Return <var>state</var>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="10" id="extensibility"><span class="secno">10. </span><span class="content">Extensibility</span><a class="self-link" href="#extensibility"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>Its purpose is to describe
how this specification can be extended to specify APIs for
different <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type③⓪">sensor types</a>.</p>
   <p>Extension specifications are encouraged to focus on a single <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type③①">sensor type</a>,
exposing both <a data-link-type="dfn" href="#high-level" id="ref-for-high-level⑧">high</a> and <a data-link-type="dfn" href="#low-level" id="ref-for-low-level⑧">low</a> level
as appropriate.</p>
   <h3 class="heading settled" data-level="10.1" id="security"><span class="secno">10.1. </span><span class="content">Security</span><a class="self-link" href="#security"></a></h3>
   <p>All interfaces defined by extension specifications
should only be available within a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#secure-context" id="ref-for-secure-context②">secure context</a>.</p>
   <h3 class="heading settled" data-level="10.2" id="naming"><span class="secno">10.2. </span><span class="content">Naming</span><a class="self-link" href="#naming"></a></h3>
   <p><code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor②⑤">Sensor</a></code> interfaces for <a data-link-type="dfn" href="#low-level" id="ref-for-low-level⑨">low-level</a> sensors should be
named after their associated <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor④⑥">sensor</a>.
So for example, the interface associated with a gyroscope
should be simply named <code>Gyroscope</code>. <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor②⑥">Sensor</a></code> interfaces for <a data-link-type="dfn" href="#high-level" id="ref-for-high-level⑨">high-level</a> sensors should be
named by combining the physical quantity the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor④⑦">sensor</a> measures
with the "Sensor" suffix.
For example, a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor④⑧">sensor</a> measuring
the distance at which an object is from it
may see its associated interface called <code>ProximitySensor</code>.</p>
   <p>Attributes of the <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor②⑦">Sensor</a></code> subclass that
hold <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings④②">sensor readings</a> values
should be named after the full name of these values.
For example, the <code>Thermometer</code> interface should hold
the <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings④③">sensor reading</a>'s value in
a <code>temperature</code> attribute (and not a <code>value</code> or <code>temp</code> attribute).
A good starting point for naming are the
Quantities, Units, Dimensions and Data Types Ontologies <a data-link-type="biblio" href="#biblio-qudt">[QUDT]</a>.</p>
   <h3 class="heading settled" data-level="10.3" id="unit"><span class="secno">10.3. </span><span class="content">Unit</span><a class="self-link" href="#unit"></a></h3>
   <p>Extension specification must specify the unit of <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings④④">sensor readings</a>.</p>
   <p>As per the Technical Architecture Group’s (TAG) API Design Principles <a data-link-type="biblio" href="#biblio-api-design-principles">[API-DESIGN-PRINCIPLES]</a>,
all time measurement should be in milliseconds.
All other units should be specified using,
in order of preference,
and with the exception of temperature (for which Celsius should be favored over Kelvin),
the International System of Units (SI),
SI derived units, and
Non-SI units accepted for use with the SI,
as described in the SI Brochure <a data-link-type="biblio" href="#biblio-si">[SI]</a>.</p>
   <h3 class="heading settled" data-level="10.4" id="high-vs-low-level"><span class="secno">10.4. </span><span class="content">Exposing High-Level vs. Low-Level Sensors</span><a class="self-link" href="#high-vs-low-level"></a></h3>
   <p>So far, specifications exposing sensors to the Web platform
have focused on <a data-link-type="dfn" href="#high-level" id="ref-for-high-level①⓪">high-level</a> sensors APIs. <a data-link-type="biblio" href="#biblio-geolocation-api">[GEOLOCATION-API]</a> <a data-link-type="biblio" href="#biblio-orientation-event">[ORIENTATION-EVENT]</a></p>
   <p>This was a reasonable approach for a number of reasons.
Indeed, <a data-link-type="dfn" href="#high-level" id="ref-for-high-level①①">high-level</a> sensors:</p>
   <ul>
    <li data-md="">
     <p>convey developer intent clearly,</p>
    <li data-md="">
     <p>do not require intimate knowledge of how the underlying hardware sensors functions,</p>
    <li data-md="">
     <p>are easy to use,</p>
    <li data-md="">
     <p>may enable the User Agent to make significant
  performance and battery life improvements,</p>
    <li data-md="">
     <p>help avoid certain privacy and security issues by
  decreasing the amount and type of information exposed.</p>
   </ul>
   <p>However, an increasing number of use cases
such as virtual and augmented reality
require <a data-link-type="dfn" href="#low-level" id="ref-for-low-level①⓪">low-level</a> access to sensors,
most notably for performance reasons.</p>
   <p>Providing <a data-link-type="dfn" href="#low-level" id="ref-for-low-level①①">low-level</a> access
enables Web application developers to leverage domain-specific constraints
and design more performant systems.</p>
   <p>Following the precepts of the Extensible Web Manifesto <a data-link-type="biblio" href="#biblio-extennnnsible">[EXTENNNNSIBLE]</a>,
extension specifications should focus primarily on
exposing <a data-link-type="dfn" href="#low-level" id="ref-for-low-level①②">low-level</a> sensor APIs, but should also expose <a data-link-type="dfn" href="#high-level" id="ref-for-high-level①②">high-level</a> APIs when they are clear benefits in doing so.</p>
   <h3 class="heading settled" data-level="10.5" id="multiple-sensors"><span class="secno">10.5. </span><span class="content">When is Enabling Multiple Sensors of the Same Type Not the Right Choice?</span><a class="self-link" href="#multiple-sensors"></a></h3>
   <p>TODO: provide guidance on when to:</p>
   <ul>
    <li data-md="">
     <p>allow multiple sensors of the same type to be instantiated,</p>
    <li data-md="">
     <p>create different interfaces that inherit from <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor②⑧">Sensor</a></code>,</p>
    <li data-md="">
     <p>add constructor parameters to tweak sensors settings (e.g. setting required accuracy).</p>
   </ul>
   <h3 class="heading settled" data-level="10.6" id="definition-reqs"><span class="secno">10.6. </span><span class="content">Definition Requirements</span><a class="self-link" href="#definition-reqs"></a></h3>
   <p>The following definitions must be specified for
each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type③②">sensor type</a> in extension specifications:</p>
   <ul>
    <li data-md="">
     <p>An <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-interface" id="ref-for-dfn-interface①">interface</a> whose <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-inherited-interfaces" id="ref-for-dfn-inherited-interfaces①">inherited interfaces</a> contains <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor②⑨">Sensor</a></code>.
  This interface must be constructible.
  Its [<code class="idl"><a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Constructor" id="ref-for-Constructor">Constructor</a></code>] must take, as argument,
  an optional <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-dictionary" id="ref-for-dfn-dictionary">dictionary</a> whose <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-inherited-dictionaries" id="ref-for-dfn-inherited-dictionaries">inherited dictionaries</a> contains <code class="idl"><a data-link-type="idl" href="#dictdef-sensoroptions" id="ref-for-dictdef-sensoroptions①">SensorOptions</a></code>.
  Its <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-attribute" id="ref-for-dfn-attribute③">attributes</a> which expose <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings④⑤">sensor readings</a> are <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-read-only" id="ref-for-dfn-read-only">read only</a> and
  their getters must return the result of invoking <a data-link-type="dfn" href="#get-value-from-latest-reading" id="ref-for-get-value-from-latest-reading②">get value from latest reading</a> with <emu-val>this</emu-val> and <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-attribute" id="ref-for-dfn-attribute④">attribute</a> <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-identifier" id="ref-for-dfn-identifier②">identifier</a> as arguments.</p>
    <li data-md="">
     <p>A <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#enumdef-permissionname" id="ref-for-enumdef-permissionname⑤">PermissionName</a></code>.</p>
   </ul>
   <p>An extension specification may specify the following definitions
for each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type③③">sensor types</a>:</p>
   <ul>
    <li data-md="">
     <p>A <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-dictionary" id="ref-for-dfn-dictionary①">dictionary</a> whose <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-inherited-dictionaries" id="ref-for-dfn-inherited-dictionaries①">inherited dictionaries</a> contains <code class="idl"><a data-link-type="idl" href="#dictdef-sensoroptions" id="ref-for-dictdef-sensoroptions②">SensorOptions</a></code>.</p>
    <li data-md="">
     <p>A <a data-link-type="dfn" href="#default-sensor" id="ref-for-default-sensor②">default sensor</a>. Generally, devices are equipped with a single <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor④⑨">sensor</a> of each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type③④">type</a>,
  so defining a <a data-link-type="dfn" href="#default-sensor" id="ref-for-default-sensor③">default sensor</a> should be straightforward.
  For <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type③⑤">sensor types</a> where multiple <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor⑤⓪">sensors</a> are common,
  extension specifications may choose not to define a <a data-link-type="dfn" href="#default-sensor" id="ref-for-default-sensor④">default sensor</a>,
  especially when doing so would not make sense.</p>
    <li data-md="">
     <p>A set of <a data-link-type="dfn" href="#identifying-parameters" id="ref-for-identifying-parameters②">identifying parameters</a>. TODO: replace that by an abstract operation.</p>
   </ul>
   <h3 class="heading settled" data-level="10.7" id="permission-api"><span class="secno">10.7. </span><span class="content">Extending the Permission API</span><a class="self-link" href="#permission-api"></a></h3>
   <p>Provide guidance on how to extend the Permission API <a data-link-type="biblio" href="#biblio-permissions">[PERMISSIONS]</a> for each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type③⑥">sensor types</a>.</p>
   <h3 class="heading settled" data-level="10.8" id="example-webidl"><span class="secno">10.8. </span><span class="content">Example WebIDL</span><a class="self-link" href="#example-webidl"></a></h3>
   <p>Here’s example WebIDL for a possible extension of this specification
for proximity <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor⑤①">sensors</a>.</p>
<pre class="example" id="example-05918fff"><a class="self-link" href="#example-05918fff"></a>[SecureContext, Constructor(optional ProximitySensorOptions proximitySensorOptions), Exposed=Winodw]
interface ProximitySensor : Sensor {
    readonly attribute unrestricted double distance;
};

dictionary ProximitySensorOptions : SensorOptions {
    double? min = -Infinity;
    double? max = Infinity;
    ProximitySensorPosition? position;
    ProximitySensorDirection? direction;
};

enum ProximitySensorPosition {
    "top-left",
    "top",
    "top-right",
    "middle-left",
    "middle",
    "middle-right",
    "bottom-left",
    "bottom",
    "bottom-right"
};

enum ProximitySensorDirection {
    "front",
    "rear",
    "left",
    "right",
    "top",
    "bottom"
};
</pre>
   <h2 class="heading settled" data-level="11" id="acknowledgements"><span class="secno">11. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
   <p>First and foremost, I would like to thank Anssi Kostiainen
for his continuous and dedicated support and input throughout
the development of this specification, as well as Mikhail Pozdnyakov,
Alexander Shalamov, Rijubrata Bhaumik, and Kenneth Rohde Christiansen
for their invaluable implementation feedback, suggestions, and research
that have helped inform the specification work.</p>
   <p>Special thanks to Rick Waldron for
driving the discussion around a generic sensor API design for the Web,
sketching the original API on which this is based,
providing implementation feedback from his work on Johnny-Five,
and continuous input during the development of this specification.</p>
   <p>Special thanks to Boris Smus, Tim Volodine, and Rich Tibbett
for their initial work on exposing sensors to the web with consistency.</p>
   <p>Thanks to Anne van Kesteren
for his tireless help both in person and through IRC.</p>
   <p>Thanks to Domenic Denicola and Jake Archibald for their help.</p>
   <p>Thanks also to Frederick Hirsch and Dominique Hazaël-Massieux (via the HTML5Apps project)
for both their administrative help and technical input.</p>
   <p>Thanks to Tab Atkins for making Bikeshed and taking the time to explain its subtleties.</p>
   <p>Thanks to Lukasz Olejnik and Maryam Mehrnezhad for their contributions around privacy and security.</p>
   <p>The following people have greatly contributed to this specification through extensive discussions on GitHub:
Anssi Kostiainen,
Boris Smus,
chaals,
Claes Nilsson,
Dave Raggett,
David Mark Clements,
Domenic Denicola,
Dominique Hazaël-Massieux (via the HTML5Apps project),
Francesco Iovine,
Frederick Hirsch,
gmandyam,
Jafar Husain,
Johannes Hund,
Kris Kowal,
Lukasz Olejnik,
Marcos Caceres,
Marijn Kruisselbrink,
Mark Foltz,
Mats Wichmann,
Matthew Podwysocki,
pablochacin,
Remy Sharp,
Rich Tibbett,
Rick Waldron,
Rijubrata Bhaumik,
robman,
Sean T. McBeth,
smaug----,
Tab Atkins Jr.,
Virginie Galindo,
zenparsing,
and Zoltan Kis.</p>
   <p>We’d also like to thank
Anssi Kostiainen,
Dominique Hazaël-Massieux,
Erik Wilde,
and
Michael[tm] Smith
for their editorial input.</p>
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="conventions"><span class="content">Document conventions</span><a class="self-link" href="#conventions"></a></h3>
   <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
   <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
   <p>Examples in this specification are introduced with the words "for example"
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="example-f839f6c8">
    <a class="self-link" href="#example-f839f6c8"></a> 
    <p>This is an example of an informative example.</p>
   </div>
   <p>Because this document doesn’t itself define APIs for specific <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type③⑦">sensor types</a>—<wbr>that is the role of extensions to this specification—<wbr>all examples are inevitably (wishful) fabrications.
    Although all of the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor⑤②">sensors</a> used a examples
    would be great candidates for building atop the Generic Sensor API,
    their inclusion in this document does not imply that the relevant Working Groups
    are planning to do so. </p>
   <p>Informative notes begin with the word "Note" and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <h3 class="no-ref no-num heading settled" id="conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#conformant-algorithms"></a></h3>
   <p>Requirements phrased in the imperative as part of algorithms (such as
    "strip any leading space characters" or "return false")
    are to be interpreted with the meaning of the key word ("must",
    "should", "may", etc) used in introducing the algorithm.</p>
   <p>Conformance requirements phrased as algorithms or specific steps can be
    implemented in any manner, so long as the end result is <dfn data-dfn-type="dfn" data-noexport="" id="equivalent">equivalent<a class="self-link" href="#equivalent"></a></dfn>. In
    particular, the algorithms defined in this specification are intended to
    be easy to understand and are not intended to be performant. Implementers
    are encouraged to optimize.</p>
   <h3 class="no-ref no-num heading settled" id="conformance-classes"><span class="content">Conformance Classes</span><a class="self-link" href="#conformance-classes"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-noexport="" id="conformant-user-agent">conformant user agent<a class="self-link" href="#conformant-user-agent"></a></dfn> must implement all the requirements
    listed in this specification that are applicable to user agents.</p>
<script>
    // Scrollspy
    var createScrollSpy = (function() {

        function targetId(element) {
            return (element.href || "").split("#")[1] || null;
        }

        function getScrollTop() {
            return (window.pageYOffset !== undefined)
                ? window.pageYOffset
                : (document.documentElement || document.body.parentNode || document.body).scrollTop;
        }

        function addClassToParents(element, className, parentClassName) {
            do {
                element = element.parentNode;
            } while (element && element.tagName != "LI")
            if (element) {
                var a = element.querySelector("a");
                if (a) a.className = className;
                addClassToParents(element, parentClassName ? parentClassName : className);
            }
        }

        function getPosition(element, container) {
            var eR = element.getBoundingClientRect();
            var cR = container.getBoundingClientRect();
            if (eR.bottom < cR.top) return "above";
            if (eR.top > cR.bottom) return "below";
            return "visible";
        }

        function createScrollSpy(options) {
            options = options || {};

            var OFFSET = 80,
                needsUpdate = false,
                previous = null,
                current = null,
                currentNav = null,
                tocContainer,
                toc,
                sections;

            tocContainer = document.querySelector(options.id);
            toc = [].slice.call(tocContainer.querySelectorAll("a"), 0);
            sections = toc.reduce(function(sections, a) {
                var id = targetId(a);
                var section = id ? document.getElementById(id) : null;
                if (section) { sections.push(section); }
                return sections;
            }, []);

            function onscroll() {
                if (!needsUpdate) {
                    needsUpdate = true;
                    requestAnimationFrame(updatePosition);
                }
            }

            function updatePosition() {
                needsUpdate = false;
                var scrollTop = (options.offset || 0) + getScrollTop();
                current = sections.filter(function(section){
                    return section.offsetTop < scrollTop;
                }).pop();
                current = current ? current.id : null;

                if (previous !== current) {
                    previous = current;
                    toc.forEach(function(a) {
                        if (targetId(a) == current) {
                            currentNav = a;
                        } else {
                            a.className = "";
                        }
                    });
                    if (options.markParents) {
                        addClassToParents(currentNav, options.className, options.parentClassName)
                    } else {
                        currentNav.className = options.className;
                    }
                    if (options.scrollIntoView && typeof currentNav.scrollIntoView == "function") {
                        var p = getPosition(currentNav, tocContainer);
                        if (p == "above") {
                            currentNav.scrollIntoView(true);
                        } else if (p == "below") {
                            currentNav.scrollIntoView(false);
                        }
                    }
                }
            }

            return {
                start: function() {
                    window.addEventListener("scroll", onscroll, false);
                },

                stop: function() {
                    window.removeEventListener("scroll", onscroll, false);
                    toc.forEach(function(a) {
                        a.className = "";
                    });
                }
            }
        }

        return createScrollSpy;
    })();

    (function() {
        var spy = createScrollSpy({
            offset: 80,
            id: "#toc",
            className: "current",
            parentClassName: "current-parent",
            markParents: true,
            scrollIntoView: true
        });

        var mm = window.matchMedia('screen and (min-width: 78em)');
        if (mm.matches) {
            spy.start();
        }
        mm.addListener(function(m) {
            if (m.matches) spy.start();
            else spy.stop();
        });
    })();
</script>
  </main>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#activate-a-sensor-object">Activate a sensor object</a><span>, in §9.2</span>
   <li><a href="#dom-sensor-activated">activated</a><span>, in §8.1</span>
   <li><a href="#activated-sensor-objects">activated sensor objects</a><span>, in §7.2</span>
   <li><a href="#associated-sensors">associated sensors</a><span>, in §7.1</span>
   <li><a href="#calibration">calibration</a><span>, in §6.1</span>
   <li><a href="#conformant-user-agent">conformant user agent</a><span>, in §Unnumbered section</span>
   <li><a href="#connect-to-sensor">Connect to sensor</a><span>, in §9.1</span>
   <li><a href="#construct-sensor-object">Construct sensor object</a><span>, in §9</span>
   <li><a href="#current-sampling-frequency">current sampling frequency</a><span>, in §7.2</span>
   <li><a href="#deactivate-a-sensor-object">Deactivate a sensor object</a><span>, in §9.3</span>
   <li><a href="#default-sensor">default sensor</a><span>, in §7.1</span>
   <li><a href="#dom-sensor-desiredsamplingfrequency-slot">[[desiredSamplingFrequency]]</a><span>, in §8.1.2</span>
   <li><a href="#equivalent">equivalent</a><span>, in §Unnumbered section</span>
   <li>
    error
    <ul>
     <li><a href="#dom-sensorerrorevent-error">attribute for SensorErrorEvent</a><span>, in §8.2</span>
     <li><a href="#dom-sensorerroreventinit-error">dict-member for SensorErrorEventInit</a><span>, in §8.2</span>
    </ul>
   <li><a href="#fallback">fallback</a><span>, in §6.3</span>
   <li><a href="#find-the-reporting-frequency-of-a-sensor-object">Find the reporting frequency of a sensor object</a><span>, in §9.8</span>
   <li>
    frequency
    <ul>
     <li><a href="#frequency">definition of</a><span>, in §6.3</span>
     <li><a href="#dom-sensoroptions-frequency">dict-member for SensorOptions</a><span>, in §8.1</span>
    </ul>
   <li><a href="#generic-sensor-permission-revocation-algorithm">generic sensor permission revocation algorithm</a><span>, in §7.1</span>
   <li><a href="#get-value-from-latest-reading">Get value from latest reading</a><span>, in §9.13</span>
   <li><a href="#high-level">high-level</a><span>, in §6.2</span>
   <li><a href="#identifying-parameters">identifying parameters</a><span>, in §7.1</span>
   <li><a href="#dom-sensor-identifyingparameters-slot">[[identifyingParameters]]</a><span>, in §8.1.2</span>
   <li><a href="#implementation-specific">implementation specific</a><span>, in §6.3</span>
   <li><a href="#dom-sensor-lasteventfiredat-slot">[[lastEventFiredAt]]</a><span>, in §8.1.2</span>
   <li><a href="#latest-reading">latest reading</a><span>, in §7.2</span>
   <li><a href="#limit-max-frequency">Limit maximum sampling frequency</a><span>, in §5.3</span>
   <li><a href="#limit-number-of-delivered-readings">Limit number of delivered readings</a><span>, in §5.3.2</span>
   <li><a href="#low-level">low-level</a><span>, in §6.2</span>
   <li><a href="#notify-activated-state">Notify activated state</a><span>, in §9.11</span>
   <li><a href="#notify-error">Notify error</a><span>, in §9.12</span>
   <li><a href="#notify-new-reading">Notify new reading</a><span>, in §9.10</span>
   <li><a href="#dom-sensor-onactivate">onactivate</a><span>, in §8.1</span>
   <li><a href="#dom-sensor-onerror">onerror</a><span>, in §8.1</span>
   <li><a href="#dom-sensor-onreading">onreading</a><span>, in §8.1</span>
   <li><a href="#optimal-sampling-frequency">optimal sampling frequency</a><span>, in §7.2</span>
   <li><a href="#dom-sensor-pendingreadingnotification-slot">[[pendingReadingNotification]]</a><span>, in §8.1.2</span>
   <li><a href="#periodic">periodic</a><span>, in §6.3</span>
   <li><a href="#raw-sensor-readings">raw sensor readings</a><span>, in §6.1</span>
   <li><a href="#reading-value">reading value</a><span>, in §6.1</span>
   <li><a href="#reduce-accuracy">Reduce accuracy</a><span>, in §5.3.3</span>
   <li><a href="#reporting-modes">reporting modes</a><span>, in §6.3</span>
   <li><a href="#report-latest-reading-updated">Report latest reading updated</a><span>, in §9.9</span>
   <li><a href="#request-sensor-access">Request sensor access</a><span>, in §9.14</span>
   <li><a href="#revoke-sensor-permission">Revoke sensor permission</a><span>, in §9.4</span>
   <li><a href="#sampling-frequency">sampling frequency</a><span>, in §6.4</span>
   <li><a href="#security-check">Security check</a><span>, in §9.7</span>
   <li><a href="#sensor">Sensor</a><span>, in §8.1</span>
   <li><a href="#concept-sensor">sensor</a><span>, in §7.2</span>
   <li><a href="#sensorerrorevent">SensorErrorEvent</a><span>, in §8.2</span>
   <li><a href="#dictdef-sensorerroreventinit">SensorErrorEventInit</a><span>, in §8.2</span>
   <li><a href="#dom-sensorerrorevent-sensorerrorevent">SensorErrorEvent(type, errorEventInitDict)</a><span>, in §8.2</span>
   <li><a href="#sensor-fusion">sensor fusion</a><span>, in §6.2</span>
   <li><a href="#sensor-hubs">sensor hubs</a><span>, in §6.2</span>
   <li><a href="#dictdef-sensoroptions">SensorOptions</a><span>, in §8.1</span>
   <li><a href="#sensor-readings">sensor readings</a><span>, in §6.1</span>
   <li><a href="#sensor-task-source">sensor task source</a><span>, in §8.1</span>
   <li><a href="#sensor-type">sensor type</a><span>, in §7.1</span>
   <li><a href="#set-sensor-settings">Set sensor settings</a><span>, in §9.5</span>
   <li><a href="#smart-sensors">Smart sensors</a><span>, in §6.2</span>
   <li><a href="#dom-sensor-start">start()</a><span>, in §8.1</span>
   <li><a href="#dom-sensor-state-slot">[[state]]</a><span>, in §8.1.2</span>
   <li><a href="#dom-sensor-stop">stop()</a><span>, in §8.1</span>
   <li><a href="#stop-sensor">Stop the sensor altogether</a><span>, in §5.3.1</span>
   <li><a href="#dom-sensor-timestamp">timestamp</a><span>, in §8.1</span>
   <li><a href="#update-latest-reading">Update latest reading</a><span>, in §9.6</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#event">Event</a>
     <li><a href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a>
     <li><a href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a>
     <li><a href="https://dom.spec.whatwg.org#concept-event">event</a>
     <li><a href="https://dom.spec.whatwg.org#concept-event-listener">event listener</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-event-fire">fire an event</a>
    </ul>
   <li>
    <a data-link-type="biblio">[hr-time-2]</a> defines the following terms:
    <ul>
     <li><a href="http://w3c.github.io/hr-time/#dom-domhighrestimestamp">DOMHighResTimeStamp</a>
     <li><a href="http://w3c.github.io/hr-time/#time-origin">time origin</a>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">active document</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">current settings object</a>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#currently-focused-area-of-a-top-level-browsing-context">currently focused area</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handler</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event handler event type</a>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#gains-focus">gains focus</a>
     <li><a href="https://html.spec.whatwg.org/multipage/interaction.html#has-focus-steps">has focus steps</a>
     <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#nested-browsing-context">nested browsing context</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2">origin</a>
     <li><a href="https://html.spec.whatwg.org/multipage/origin.html#same-origin-domain">same origin-domain</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#spin-the-event-loop">spin the event loop</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task">task</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue">task queue</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source">task source</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><a href="https://infra.spec.whatwg.org/#set-append">append</a>
     <li><a href="https://infra.spec.whatwg.org/#list-contain">contain</a>
     <li><a href="https://infra.spec.whatwg.org/#map-entry">entry</a>
     <li><a href="https://infra.spec.whatwg.org/#list-iterate">for each <small>(for list)</small></a>
     <li><a href="https://infra.spec.whatwg.org/#map-iterate">for each <small>(for map)</small></a>
     <li><a href="https://infra.spec.whatwg.org/#list-is-empty">is empty</a>
     <li><a href="https://infra.spec.whatwg.org/#map-key">key</a>
     <li><a href="https://infra.spec.whatwg.org/#ordered-map">ordered map</a>
     <li><a href="https://infra.spec.whatwg.org/#ordered-set">ordered set</a>
     <li><a href="https://infra.spec.whatwg.org/#list-remove">remove</a>
     <li><a href="https://infra.spec.whatwg.org/#map-set">set</a>
     <li><a href="https://infra.spec.whatwg.org/#map-value">value</a>
    </ul>
   <li>
    <a data-link-type="biblio">[page-visibility]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/page-visibility#dfn-steps-to-determine-the-visibility-state">steps to determine the visibility state</a>
    </ul>
   <li>
    <a data-link-type="biblio">[permissions-1]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/permissions/#dictdef-permissiondescriptor">PermissionDescriptor</a>
     <li><a href="https://w3c.github.io/permissions/#enumdef-permissionname">PermissionName</a>
     <li><a href="https://w3c.github.io/permissions/#new-information-about-the-users-intent">new information about the user's intent</a>
     <li><a href="https://w3c.github.io/permissions/#permission-revocation-algorithm">permission revocation algorithm</a>
     <li><a href="https://w3c.github.io/permissions/#permission-state">permission state</a>
     <li><a href="https://w3c.github.io/permissions/#request-permission-to-use">request permission to use</a>
    </ul>
   <li>
    <a data-link-type="biblio">[secure-contexts-1]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">secure context</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WebIDL]</a> defines the following terms:
    <ul>
     <li><a href="https://heycam.github.io/webidl/#Constructor">Constructor</a>
     <li><a href="https://heycam.github.io/webidl/#idl-DOMException">DOMException</a>
     <li><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>
     <li><a href="https://heycam.github.io/webidl/#idl-Error">Error</a>
     <li><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>
     <li><a href="https://heycam.github.io/webidl/#notallowederror">NotAllowedError</a>
     <li><a href="https://heycam.github.io/webidl/#notreadableerror">NotReadableError</a>
     <li><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>
     <li><a href="https://heycam.github.io/webidl/#securityerror">SecurityError</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-attribute">attribute</a>
     <li><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-create-exception">created</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-dictionary">dictionary</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-dictionary-member">dictionary members</a>
     <li><a href="https://heycam.github.io/webidl/#idl-double">double</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-exception">exception</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-exception-type">exception types</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-identifier">identifier</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-inherited-dictionaries">inherited dictionaries</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-inherited-interfaces">inherited interfaces</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-interface">interface</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-present">present</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-read-only">read only</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-throw">throw</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-hr-time-2">[HR-TIME-2]
   <dd>Ilya Grigorik; James Simonsen; Jatinder Mann. <a href="https://w3c.github.io/hr-time/">High Resolution Time Level 2</a>. URL: <a href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/">Infra Standard</a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-page-visibility">[PAGE-VISIBILITY]
   <dd>Jatinder Mann; Arvind Jain. <a href="https://www.w3.org/TR/page-visibility/">Page Visibility (Second Edition)</a>. 29 October 2013. REC. URL: <a href="https://www.w3.org/TR/page-visibility/">https://www.w3.org/TR/page-visibility/</a>
   <dt id="biblio-permissions">[PERMISSIONS]
   <dd>Mounir Lamouri; Marcos Caceres. <a href="https://w3c.github.io/permissions/">The Permissions API</a>. URL: <a href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-webidl">[WebIDL]
   <dd>Cameron McCormack; Boris Zbarsky; Tobie Langel. <a href="https://heycam.github.io/webidl/">Web IDL</a>. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-api-design-principles">[API-DESIGN-PRINCIPLES]
   <dd>Domenic Denicola. <a href="https://w3ctag.github.io/design-principles/">API Design Principles</a>. 29 December 2015. URL: <a href="https://w3ctag.github.io/design-principles/">https://w3ctag.github.io/design-principles/</a>
   <dt id="biblio-extennnnsible">[EXTENNNNSIBLE]
   <dd><a href="https://extensiblewebmanifesto.org/">The Extensible Web Manifesto</a>. 10 June 2013. URL: <a href="https://extensiblewebmanifesto.org/">https://extensiblewebmanifesto.org/</a>
   <dt id="biblio-feature-policy">[FEATURE-POLICY]
   <dd><a href="https://wicg.github.io/feature-policy/">Feature Policy</a>. Living Standard. URL: <a href="https://wicg.github.io/feature-policy/">https://wicg.github.io/feature-policy/</a>
   <dt id="biblio-geolocation-api">[GEOLOCATION-API]
   <dd>Andrei Popescu. <a href="http://dev.w3.org/geo/api/spec-source.html">Geolocation API Specification 2nd Edition</a>. URL: <a href="http://dev.w3.org/geo/api/spec-source.html">http://dev.w3.org/geo/api/spec-source.html</a>
   <dt id="biblio-gyrospeechrecognition">[GYROSPEECHRECOGNITION]
   <dd>Michalevsky, Y., Boneh, D. and Nakibly, G.. <a href="https://www.usenix.org/system/files/conference/usenixsecurity14/sec14-paper-michalevsky.pdf">Gyrophone: Recognizing Speech from Gyroscope Signals</a>. 2014. Informational. URL: <a href="https://www.usenix.org/system/files/conference/usenixsecurity14/sec14-paper-michalevsky.pdf">https://www.usenix.org/system/files/conference/usenixsecurity14/sec14-paper-michalevsky.pdf</a>
   <dt id="biblio-mobilesensors">[MOBILESENSORS]
   <dd>Manish J. Gajjar. Mobile Sensors and Context-Aware Computing. 2017. Informational. 
   <dt id="biblio-orientation-event">[ORIENTATION-EVENT]
   <dd>Rich Tibbett; et al. <a href="https://w3c.github.io/deviceorientation/spec-source-orientation.html">DeviceOrientation Event Specification</a>. URL: <a href="https://w3c.github.io/deviceorientation/spec-source-orientation.html">https://w3c.github.io/deviceorientation/spec-source-orientation.html</a>
   <dt id="biblio-powerful-features">[POWERFUL-FEATURES]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec-secure-contexts/">Secure Contexts</a>. URL: <a href="https://w3c.github.io/webappsec-secure-contexts/">https://w3c.github.io/webappsec-secure-contexts/</a>
   <dt id="biblio-qudt">[QUDT]
   <dd>Ralph Hodgson; et al. <a href="http://www.qudt.org/">QUDT - Quantities, Units, Dimensions and Data Types Ontologies</a>. 18 March 2014. URL: <a href="http://www.qudt.org/">http://www.qudt.org/</a>
   <dt id="biblio-rfc6454">[RFC6454]
   <dd>A. Barth. <a href="https://tools.ietf.org/html/rfc6454">The Web Origin Concept</a>. December 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6454">https://tools.ietf.org/html/rfc6454</a>
   <dt id="biblio-si">[SI]
   <dd><a href="http://www.bipm.org/en/publications/si-brochure/">SI Brochure: The International System of Units (SI), 8th edition</a>. 2014. URL: <a href="http://www.bipm.org/en/publications/si-brochure/">http://www.bipm.org/en/publications/si-brochure/</a>
   <dt id="biblio-stealingpinsviasensors">[STEALINGPINSVIASENSORS]
   <dd>Maryam Mehrnezhad, Ehsan Toreini, Siamak F. Shahandashti, Feng Hao. <a href="https://rd.springer.com/article/10.1007/s10207-017-0369-x?wt_mc=Internal.Event.1.SEM.ArticleAuthorOnlineFirst">Stealing PINs via mobile sensors: actual risk versus user perception</a>. 2017. Informational. URL: <a href="https://rd.springer.com/article/10.1007/s10207-017-0369-x?wt_mc=Internal.Event.1.SEM.ArticleAuthorOnlineFirst">https://rd.springer.com/article/10.1007/s10207-017-0369-x?wt_mc=Internal.Event.1.SEM.ArticleAuthorOnlineFirst</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext" id="ref-for-SecureContext②">SecureContext</a>, <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed②">Exposed</a>=<span class="n">Window</span>]
<span class="kt">interface</span> <a class="nv" href="#sensor"><code>Sensor</code></a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget①">EventTarget</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean①"><span class="kt">boolean</span></a> <a class="nv" data-readonly="" data-type="boolean" href="#dom-sensor-activated"><code>activated</code></a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="http://w3c.github.io/hr-time/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp①">DOMHighResTimeStamp</a>? <a class="nv" data-readonly="" data-type="DOMHighResTimeStamp?" href="#dom-sensor-timestamp"><code>timestamp</code></a>;
  <span class="kt">void</span> <a class="nv" href="#dom-sensor-start"><code>start</code></a>();
  <span class="kt">void</span> <a class="nv" href="#dom-sensor-stop"><code>stop</code></a>();
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler⑥">EventHandler</a> <a class="nv" data-type="EventHandler" href="#dom-sensor-onreading"><code>onreading</code></a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler①①">EventHandler</a> <a class="nv" data-type="EventHandler" href="#dom-sensor-onactivate"><code>onactivate</code></a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler②①">EventHandler</a> <a class="nv" data-type="EventHandler" href="#dom-sensor-onerror"><code>onerror</code></a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-sensoroptions"><code>SensorOptions</code></a> {
  <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-double" id="ref-for-idl-double①"><span class="kt">double</span></a>? <a class="nv" data-type="double? " href="#dom-sensoroptions-frequency"><code>frequency</code></a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext" id="ref-for-SecureContext①①">SecureContext</a>, <a class="nv" href="#dom-sensorerrorevent-sensorerrorevent"><code>Constructor</code></a>(<a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString①"><span class="kt">DOMString</span></a> <a class="nv" href="#dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-type"><code>type</code></a>, <a class="n" data-link-type="idl-name" href="#dictdef-sensorerroreventinit" id="ref-for-dictdef-sensorerroreventinit②">SensorErrorEventInit</a> <a class="nv" href="#dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-erroreventinitdict"><code>errorEventInitDict</code></a>), <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①①">Exposed</a>=<span class="n">Window</span>]
<span class="kt">interface</span> <a class="nv" href="#sensorerrorevent"><code>SensorErrorEvent</code></a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event" id="ref-for-event①">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-Error" id="ref-for-idl-Error③"><span class="kt">Error</span></a> <a class="nv" data-readonly="" data-type="Error" href="#dom-sensorerrorevent-error"><code>error</code></a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-sensorerroreventinit"><code>SensorErrorEventInit</code></a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit" id="ref-for-dictdef-eventinit①">EventInit</a> {
  <span class="kt">required</span> <a class="n idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-Error" id="ref-for-idl-Error①①"><span class="kt">Error</span></a> <a class="nv" data-type="Error " href="#dom-sensorerroreventinit-error"><code>error</code></a>;
};

</pre>
  <aside class="dfn-panel" data-for="limit-max-frequency">
   <b><a href="#limit-max-frequency">#limit-max-frequency</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-limit-max-frequency">5.3.3. Limit number of delivered readings</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="raw-sensor-readings">
   <b><a href="#raw-sensor-readings">#raw-sensor-readings</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-raw-sensor-readings">6.1. Sensors</a> <a href="#ref-for-raw-sensor-readings①">(2)</a> <a href="#ref-for-raw-sensor-readings②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="calibration">
   <b><a href="#calibration">#calibration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-calibration">6.1. Sensors</a>
    <li><a href="#ref-for-calibration①">6.2. Sensor Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor-readings">
   <b><a href="#sensor-readings">#sensor-readings</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-readings">5. Security and privacy considerations</a> <a href="#ref-for-sensor-readings①">(2)</a>
    <li><a href="#ref-for-sensor-readings②">5.1.1. Location Tracking</a>
    <li><a href="#ref-for-sensor-readings③">5.1.2. Eavesdropping</a>
    <li><a href="#ref-for-sensor-readings④">5.1.3. Keystroke Monitoring</a>
    <li><a href="#ref-for-sensor-readings⑤">5.1.5. User Identifying</a>
    <li><a href="#ref-for-sensor-readings⑥">5.2.1. Secure Context</a>
    <li><a href="#ref-for-sensor-readings⑦">5.2.2. Top-Level Browsing Context</a> <a href="#ref-for-sensor-readings⑧">(2)</a>
    <li><a href="#ref-for-sensor-readings⑨">5.2.3. Losing Focus</a> <a href="#ref-for-sensor-readings①⓪">(2)</a>
    <li><a href="#ref-for-sensor-readings①①">5.2.4. Visibility State</a> <a href="#ref-for-sensor-readings①②">(2)</a>
    <li><a href="#ref-for-sensor-readings①③">5.2.5. Permissions API</a> <a href="#ref-for-sensor-readings①④">(2)</a>
    <li><a href="#ref-for-sensor-readings①⑤">5.3.3. Limit number of delivered readings</a>
    <li><a href="#ref-for-sensor-readings①⑥">5.3.4. Reduce accuracy</a> <a href="#ref-for-sensor-readings①⑦">(2)</a>
    <li><a href="#ref-for-sensor-readings①⑧">5.3.5. Keep the user informed about API use</a>
    <li><a href="#ref-for-sensor-readings①⑨">6.2. Sensor Types</a> <a href="#ref-for-sensor-readings②⓪">(2)</a> <a href="#ref-for-sensor-readings②①">(3)</a> <a href="#ref-for-sensor-readings②②">(4)</a> <a href="#ref-for-sensor-readings②③">(5)</a>
    <li><a href="#ref-for-sensor-readings②④">6.3. Reporting Modes</a> <a href="#ref-for-sensor-readings②⑤">(2)</a> <a href="#ref-for-sensor-readings②⑥">(3)</a> <a href="#ref-for-sensor-readings②⑦">(4)</a> <a href="#ref-for-sensor-readings②⑧">(5)</a>
    <li><a href="#ref-for-sensor-readings②⑨">6.4. Sampling Frequency</a>
    <li><a href="#ref-for-sensor-readings③⓪">7.2. Sensor</a> <a href="#ref-for-sensor-readings③①">(2)</a> <a href="#ref-for-sensor-readings③②">(3)</a> <a href="#ref-for-sensor-readings③③">(4)</a>
    <li><a href="#ref-for-sensor-readings③④">8.1. The Sensor Interface</a>
    <li><a href="#ref-for-sensor-readings③⑤">8.1.2. Sensor internal slots</a> <a href="#ref-for-sensor-readings③⑥">(2)</a>
    <li><a href="#ref-for-sensor-readings③⑦">8.1.7. Sensor.onreading</a>
    <li><a href="#ref-for-sensor-readings③⑧">9.6. Set sensor settings</a> <a href="#ref-for-sensor-readings③⑨">(2)</a>
    <li><a href="#ref-for-sensor-readings④⓪">9.7. Update latest reading</a>
    <li><a href="#ref-for-sensor-readings④①">9.14. Get value from latest reading</a>
    <li><a href="#ref-for-sensor-readings④②">10.2. Naming</a> <a href="#ref-for-sensor-readings④③">(2)</a>
    <li><a href="#ref-for-sensor-readings④④">10.3. Unit</a>
    <li><a href="#ref-for-sensor-readings④⑤">10.6. Definition Requirements</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="low-level">
   <b><a href="#low-level">#low-level</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-low-level">1. Introduction</a>
    <li><a href="#ref-for-low-level①">6.2. Sensor Types</a> <a href="#ref-for-low-level②">(2)</a> <a href="#ref-for-low-level③">(3)</a> <a href="#ref-for-low-level④">(4)</a> <a href="#ref-for-low-level⑤">(5)</a> <a href="#ref-for-low-level⑥">(6)</a> <a href="#ref-for-low-level⑦">(7)</a>
    <li><a href="#ref-for-low-level⑧">10. Extensibility</a>
    <li><a href="#ref-for-low-level⑨">10.2. Naming</a>
    <li><a href="#ref-for-low-level①⓪">10.4. Exposing High-Level vs. Low-Level Sensors</a> <a href="#ref-for-low-level①①">(2)</a> <a href="#ref-for-low-level①②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="high-level">
   <b><a href="#high-level">#high-level</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-high-level">1. Introduction</a>
    <li><a href="#ref-for-high-level①">6.2. Sensor Types</a> <a href="#ref-for-high-level②">(2)</a> <a href="#ref-for-high-level③">(3)</a> <a href="#ref-for-high-level④">(4)</a> <a href="#ref-for-high-level⑤">(5)</a> <a href="#ref-for-high-level⑥">(6)</a> <a href="#ref-for-high-level⑦">(7)</a>
    <li><a href="#ref-for-high-level⑧">10. Extensibility</a>
    <li><a href="#ref-for-high-level⑨">10.2. Naming</a>
    <li><a href="#ref-for-high-level①⓪">10.4. Exposing High-Level vs. Low-Level Sensors</a> <a href="#ref-for-high-level①①">(2)</a> <a href="#ref-for-high-level①②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor-fusion">
   <b><a href="#sensor-fusion">#sensor-fusion</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-fusion">6.1. Sensors</a> <a href="#ref-for-sensor-fusion①">(2)</a>
    <li><a href="#ref-for-sensor-fusion②">6.2. Sensor Types</a> <a href="#ref-for-sensor-fusion③">(2)</a> <a href="#ref-for-sensor-fusion④">(3)</a> <a href="#ref-for-sensor-fusion⑤">(4)</a> <a href="#ref-for-sensor-fusion⑥">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="smart-sensors">
   <b><a href="#smart-sensors">#smart-sensors</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-smart-sensors">6.3. Reporting Modes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor-hubs">
   <b><a href="#sensor-hubs">#sensor-hubs</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-hubs">6.3. Reporting Modes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reporting-modes">
   <b><a href="#reporting-modes">#reporting-modes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reporting-modes">5. Security and privacy considerations</a>
    <li><a href="#ref-for-reporting-modes①">6.3. Reporting Modes</a> <a href="#ref-for-reporting-modes②">(2)</a> <a href="#ref-for-reporting-modes③">(3)</a> <a href="#ref-for-reporting-modes④">(4)</a> <a href="#ref-for-reporting-modes⑤">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="frequency">
   <b><a href="#frequency">#frequency</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-frequency">6.3. Reporting Modes</a> <a href="#ref-for-frequency①">(2)</a>
    <li><a href="#ref-for-frequency②">9.1. Construct sensor object</a>
    <li><a href="#ref-for-frequency③">9.9. Find the reporting frequency of a sensor object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="periodic">
   <b><a href="#periodic">#periodic</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-periodic">5. Security and privacy considerations</a>
    <li><a href="#ref-for-periodic①">6.3. Reporting Modes</a> <a href="#ref-for-periodic②">(2)</a> <a href="#ref-for-periodic③">(3)</a> <a href="#ref-for-periodic④">(4)</a> <a href="#ref-for-periodic⑤">(5)</a> <a href="#ref-for-periodic⑥">(6)</a> <a href="#ref-for-periodic⑦">(7)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="implementation-specific">
   <b><a href="#implementation-specific">#implementation-specific</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-implementation-specific">6.3. Reporting Modes</a> <a href="#ref-for-implementation-specific①">(2)</a> <a href="#ref-for-implementation-specific②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sampling-frequency">
   <b><a href="#sampling-frequency">#sampling-frequency</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sampling-frequency">5.3.1. Limit maximum sampling frequency</a> <a href="#ref-for-sampling-frequency①">(2)</a>
    <li><a href="#ref-for-sampling-frequency②">5.3.3. Limit number of delivered readings</a>
    <li><a href="#ref-for-sampling-frequency③">7.2. Sensor</a> <a href="#ref-for-sampling-frequency④">(2)</a>
    <li><a href="#ref-for-sampling-frequency⑤">8.1.2. Sensor internal slots</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor-type">
   <b><a href="#sensor-type">#sensor-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-type">3. Background</a> <a href="#ref-for-sensor-type①">(2)</a> <a href="#ref-for-sensor-type②">(3)</a> <a href="#ref-for-sensor-type③">(4)</a> <a href="#ref-for-sensor-type④">(5)</a> <a href="#ref-for-sensor-type⑤">(6)</a>
    <li><a href="#ref-for-sensor-type⑥">5. Security and privacy considerations</a>
    <li><a href="#ref-for-sensor-type⑦">5.3. Mitigation strategies applied on a case by case basis</a>
    <li><a href="#ref-for-sensor-type⑧">5.3.1. Limit maximum sampling frequency</a>
    <li><a href="#ref-for-sensor-type⑨">6.2. Sensor Types</a> <a href="#ref-for-sensor-type①⓪">(2)</a> <a href="#ref-for-sensor-type①①">(3)</a> <a href="#ref-for-sensor-type①②">(4)</a> <a href="#ref-for-sensor-type①③">(5)</a> <a href="#ref-for-sensor-type①④">(6)</a> <a href="#ref-for-sensor-type①⑤">(7)</a> <a href="#ref-for-sensor-type①⑥">(8)</a>
    <li><a href="#ref-for-sensor-type①⑦">6.3. Reporting Modes</a> <a href="#ref-for-sensor-type①⑧">(2)</a> <a href="#ref-for-sensor-type①⑨">(3)</a>
    <li><a href="#ref-for-sensor-type②⓪">7.1. Sensor Type</a> <a href="#ref-for-sensor-type②①">(2)</a> <a href="#ref-for-sensor-type②②">(3)</a> <a href="#ref-for-sensor-type②③">(4)</a> <a href="#ref-for-sensor-type②④">(5)</a> <a href="#ref-for-sensor-type②⑤">(6)</a>
    <li><a href="#ref-for-sensor-type②⑥">7.2. Sensor</a> <a href="#ref-for-sensor-type②⑦">(2)</a>
    <li><a href="#ref-for-sensor-type②⑧">8.1.2. Sensor internal slots</a>
    <li><a href="#ref-for-sensor-type②⑨">9.2. Connect to sensor</a>
    <li><a href="#ref-for-sensor-type③⓪">10. Extensibility</a> <a href="#ref-for-sensor-type③①">(2)</a>
    <li><a href="#ref-for-sensor-type③②">10.6. Definition Requirements</a> <a href="#ref-for-sensor-type③③">(2)</a> <a href="#ref-for-sensor-type③④">(3)</a> <a href="#ref-for-sensor-type③⑤">(4)</a>
    <li><a href="#ref-for-sensor-type③⑥">10.7. Extending the Permission API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="associated-sensors">
   <b><a href="#associated-sensors">#associated-sensors</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-associated-sensors">7.1. Sensor Type</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="identifying-parameters">
   <b><a href="#identifying-parameters">#identifying-parameters</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-identifying-parameters">9.1. Construct sensor object</a> <a href="#ref-for-identifying-parameters①">(2)</a>
    <li><a href="#ref-for-identifying-parameters②">10.6. Definition Requirements</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="default-sensor">
   <b><a href="#default-sensor">#default-sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-default-sensor">9.2. Connect to sensor</a> <a href="#ref-for-default-sensor①">(2)</a>
    <li><a href="#ref-for-default-sensor②">10.6. Definition Requirements</a> <a href="#ref-for-default-sensor③">(2)</a> <a href="#ref-for-default-sensor④">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="concept-sensor">
   <b><a href="#concept-sensor">#concept-sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-sensor">3. Background</a> <a href="#ref-for-concept-sensor①">(2)</a> <a href="#ref-for-concept-sensor②">(3)</a> <a href="#ref-for-concept-sensor③">(4)</a> <a href="#ref-for-concept-sensor④">(5)</a> <a href="#ref-for-concept-sensor⑤">(6)</a> <a href="#ref-for-concept-sensor⑥">(7)</a> <a href="#ref-for-concept-sensor⑦">(8)</a>
    <li><a href="#ref-for-concept-sensor⑧">5. Security and privacy considerations</a> <a href="#ref-for-concept-sensor⑨">(2)</a> <a href="#ref-for-concept-sensor①⓪">(3)</a> <a href="#ref-for-concept-sensor①①">(4)</a>
    <li><a href="#ref-for-concept-sensor①②">5.2.3. Losing Focus</a>
    <li><a href="#ref-for-concept-sensor①③">6.1. Sensors</a> <a href="#ref-for-concept-sensor①④">(2)</a>
    <li><a href="#ref-for-concept-sensor①⑤">6.2. Sensor Types</a> <a href="#ref-for-concept-sensor①⑥">(2)</a> <a href="#ref-for-concept-sensor①⑦">(3)</a>
    <li><a href="#ref-for-concept-sensor①⑧">6.3. Reporting Modes</a> <a href="#ref-for-concept-sensor①⑨">(2)</a> <a href="#ref-for-concept-sensor②⓪">(3)</a>
    <li><a href="#ref-for-concept-sensor②①">6.4. Sampling Frequency</a>
    <li><a href="#ref-for-concept-sensor②②">7.1. Sensor Type</a> <a href="#ref-for-concept-sensor②③">(2)</a>
    <li><a href="#ref-for-concept-sensor②④">7.2. Sensor</a> <a href="#ref-for-concept-sensor②⑤">(2)</a> <a href="#ref-for-concept-sensor②⑥">(3)</a> <a href="#ref-for-concept-sensor②⑦">(4)</a> <a href="#ref-for-concept-sensor②⑧">(5)</a>
    <li><a href="#ref-for-concept-sensor②⑨">8.1. The Sensor Interface</a> <a href="#ref-for-concept-sensor③⓪">(2)</a> <a href="#ref-for-concept-sensor③①">(3)</a>
    <li><a href="#ref-for-concept-sensor③②">8.1.2. Sensor internal slots</a>
    <li><a href="#ref-for-concept-sensor③③">9.2. Connect to sensor</a> <a href="#ref-for-concept-sensor③④">(2)</a> <a href="#ref-for-concept-sensor③⑤">(3)</a> <a href="#ref-for-concept-sensor③⑥">(4)</a>
    <li><a href="#ref-for-concept-sensor③⑦">9.3. Activate a sensor object</a>
    <li><a href="#ref-for-concept-sensor③⑧">9.4. Deactivate a sensor object</a>
    <li><a href="#ref-for-concept-sensor③⑨">9.5. Revoke sensor permission</a>
    <li><a href="#ref-for-concept-sensor④⓪">9.6. Set sensor settings</a>
    <li><a href="#ref-for-concept-sensor④①">9.7. Update latest reading</a>
    <li><a href="#ref-for-concept-sensor④②">9.9. Find the reporting frequency of a sensor object</a>
    <li><a href="#ref-for-concept-sensor④③">9.12. Notify activated state</a>
    <li><a href="#ref-for-concept-sensor④④">9.14. Get value from latest reading</a>
    <li><a href="#ref-for-concept-sensor④⑤">9.15. Request sensor access</a>
    <li><a href="#ref-for-concept-sensor④⑥">10.2. Naming</a> <a href="#ref-for-concept-sensor④⑦">(2)</a> <a href="#ref-for-concept-sensor④⑧">(3)</a>
    <li><a href="#ref-for-concept-sensor④⑨">10.6. Definition Requirements</a> <a href="#ref-for-concept-sensor⑤⓪">(2)</a>
    <li><a href="#ref-for-concept-sensor⑤①">10.8. Example WebIDL</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="activated-sensor-objects">
   <b><a href="#activated-sensor-objects">#activated-sensor-objects</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-activated-sensor-objects">7.2. Sensor</a> <a href="#ref-for-activated-sensor-objects①">(2)</a>
    <li><a href="#ref-for-activated-sensor-objects②">9.3. Activate a sensor object</a>
    <li><a href="#ref-for-activated-sensor-objects③">9.4. Deactivate a sensor object</a> <a href="#ref-for-activated-sensor-objects④">(2)</a>
    <li><a href="#ref-for-activated-sensor-objects⑤">9.5. Revoke sensor permission</a>
    <li><a href="#ref-for-activated-sensor-objects⑥">9.6. Set sensor settings</a>
    <li><a href="#ref-for-activated-sensor-objects⑦">9.7. Update latest reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="latest-reading">
   <b><a href="#latest-reading">#latest-reading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-latest-reading">7.2. Sensor</a> <a href="#ref-for-latest-reading①">(2)</a> <a href="#ref-for-latest-reading②">(3)</a> <a href="#ref-for-latest-reading③">(4)</a> <a href="#ref-for-latest-reading④">(5)</a> <a href="#ref-for-latest-reading⑤">(6)</a> <a href="#ref-for-latest-reading⑥">(7)</a>
    <li><a href="#ref-for-latest-reading⑦">9.6. Set sensor settings</a> <a href="#ref-for-latest-reading⑧">(2)</a>
    <li><a href="#ref-for-latest-reading⑨">9.7. Update latest reading</a> <a href="#ref-for-latest-reading①⓪">(2)</a>
    <li><a href="#ref-for-latest-reading①①">9.10. Report latest reading updated</a>
    <li><a href="#ref-for-latest-reading①②">9.11. Notify new reading</a>
    <li><a href="#ref-for-latest-reading①③">9.12. Notify activated state</a>
    <li><a href="#ref-for-latest-reading①④">9.14. Get value from latest reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="current-sampling-frequency">
   <b><a href="#current-sampling-frequency">#current-sampling-frequency</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-sampling-frequency">7.2. Sensor</a>
    <li><a href="#ref-for-current-sampling-frequency①">9.6. Set sensor settings</a> <a href="#ref-for-current-sampling-frequency②">(2)</a>
    <li><a href="#ref-for-current-sampling-frequency③">9.9. Find the reporting frequency of a sensor object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="optimal-sampling-frequency">
   <b><a href="#optimal-sampling-frequency">#optimal-sampling-frequency</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-optimal-sampling-frequency">7.2. Sensor</a>
    <li><a href="#ref-for-optimal-sampling-frequency①">9.6. Set sensor settings</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor">
   <b><a href="#sensor">#sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor">3. Background</a>
    <li><a href="#ref-for-sensor①">4. A note on Feature Detection of Hardware Features</a>
    <li><a href="#ref-for-sensor②">7.1. Sensor Type</a> <a href="#ref-for-sensor③">(2)</a>
    <li><a href="#ref-for-sensor④">7.2. Sensor</a>
    <li><a href="#ref-for-sensor⑤">8.1. The Sensor Interface</a>
    <li><a href="#ref-for-sensor⑥">8.1.1. Sensor lifecycle</a>
    <li><a href="#ref-for-sensor⑦">8.1.2. Sensor internal slots</a> <a href="#ref-for-sensor⑧">(2)</a> <a href="#ref-for-sensor⑨">(3)</a> <a href="#ref-for-sensor①⓪">(4)</a>
    <li><a href="#ref-for-sensor①①">8.1.10. Event handlers</a>
    <li><a href="#ref-for-sensor①②">9.1. Construct sensor object</a> <a href="#ref-for-sensor①③">(2)</a> <a href="#ref-for-sensor①④">(3)</a>
    <li><a href="#ref-for-sensor①⑤">9.2. Connect to sensor</a>
    <li><a href="#ref-for-sensor①⑥">9.3. Activate a sensor object</a>
    <li><a href="#ref-for-sensor①⑦">9.4. Deactivate a sensor object</a>
    <li><a href="#ref-for-sensor①⑧">9.9. Find the reporting frequency of a sensor object</a>
    <li><a href="#ref-for-sensor①⑨">9.10. Report latest reading updated</a>
    <li><a href="#ref-for-sensor②⓪">9.11. Notify new reading</a>
    <li><a href="#ref-for-sensor②①">9.12. Notify activated state</a>
    <li><a href="#ref-for-sensor②②">9.13. Notify error</a>
    <li><a href="#ref-for-sensor②③">9.14. Get value from latest reading</a>
    <li><a href="#ref-for-sensor②④">9.15. Request sensor access</a>
    <li><a href="#ref-for-sensor②⑤">10.2. Naming</a> <a href="#ref-for-sensor②⑥">(2)</a> <a href="#ref-for-sensor②⑦">(3)</a>
    <li><a href="#ref-for-sensor②⑧">10.5. When is Enabling Multiple Sensors of the Same Type Not the Right Choice?</a>
    <li><a href="#ref-for-sensor②⑨">10.6. Definition Requirements</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-activated">
   <b><a href="#dom-sensor-activated">#dom-sensor-activated</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-activated">8.1.3. Sensor.activated</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-timestamp">
   <b><a href="#dom-sensor-timestamp">#dom-sensor-timestamp</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-timestamp">8.1.4. Sensor.timestamp</a>
    <li><a href="#ref-for-dom-sensor-timestamp①">9.1. Construct sensor object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-start">
   <b><a href="#dom-sensor-start">#dom-sensor-start</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-start">8.1.5. Sensor.start()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-stop">
   <b><a href="#dom-sensor-stop">#dom-sensor-stop</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-stop">8.1.6. Sensor.stop()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-onreading">
   <b><a href="#dom-sensor-onreading">#dom-sensor-onreading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-onreading">8.1.7. Sensor.onreading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-onactivate">
   <b><a href="#dom-sensor-onactivate">#dom-sensor-onactivate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-onactivate">8.1.8. Sensor.onactivate</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-onerror">
   <b><a href="#dom-sensor-onerror">#dom-sensor-onerror</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-onerror">8.1.9. Sensor.onerror</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-sensoroptions">
   <b><a href="#dictdef-sensoroptions">#dictdef-sensoroptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-sensoroptions">9.1. Construct sensor object</a>
    <li><a href="#ref-for-dictdef-sensoroptions①">10.6. Definition Requirements</a> <a href="#ref-for-dictdef-sensoroptions②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensoroptions-frequency">
   <b><a href="#dom-sensoroptions-frequency">#dom-sensoroptions-frequency</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensoroptions-frequency">9.1. Construct sensor object</a> <a href="#ref-for-dom-sensoroptions-frequency①">(2)</a> <a href="#ref-for-dom-sensoroptions-frequency②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor-task-source">
   <b><a href="#sensor-task-source">#sensor-task-source</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-task-source">9.4. Deactivate a sensor object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-state-slot">
   <b><a href="#dom-sensor-state-slot">#dom-sensor-state-slot</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-state-slot">8.1.3. Sensor.activated</a>
    <li><a href="#ref-for-dom-sensor-state-slot①">8.1.5. Sensor.start()</a> <a href="#ref-for-dom-sensor-state-slot②">(2)</a>
    <li><a href="#ref-for-dom-sensor-state-slot③">8.1.6. Sensor.stop()</a> <a href="#ref-for-dom-sensor-state-slot④">(2)</a>
    <li><a href="#ref-for-dom-sensor-state-slot⑤">8.1.8. Sensor.onactivate</a>
    <li><a href="#ref-for-dom-sensor-state-slot⑥">9.1. Construct sensor object</a>
    <li><a href="#ref-for-dom-sensor-state-slot⑦">9.12. Notify activated state</a>
    <li><a href="#ref-for-dom-sensor-state-slot⑧">9.13. Notify error</a>
    <li><a href="#ref-for-dom-sensor-state-slot⑨">9.14. Get value from latest reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-desiredsamplingfrequency-slot">
   <b><a href="#dom-sensor-desiredsamplingfrequency-slot">#dom-sensor-desiredsamplingfrequency-slot</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-desiredsamplingfrequency-slot">7.2. Sensor</a> <a href="#ref-for-dom-sensor-desiredsamplingfrequency-slot①">(2)</a>
    <li><a href="#ref-for-dom-sensor-desiredsamplingfrequency-slot②">9.1. Construct sensor object</a>
    <li><a href="#ref-for-dom-sensor-desiredsamplingfrequency-slot③">9.9. Find the reporting frequency of a sensor object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-lasteventfiredat-slot">
   <b><a href="#dom-sensor-lasteventfiredat-slot">#dom-sensor-lasteventfiredat-slot</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-lasteventfiredat-slot">9.4. Deactivate a sensor object</a>
    <li><a href="#ref-for-dom-sensor-lasteventfiredat-slot①">9.10. Report latest reading updated</a>
    <li><a href="#ref-for-dom-sensor-lasteventfiredat-slot②">9.11. Notify new reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-pendingreadingnotification-slot">
   <b><a href="#dom-sensor-pendingreadingnotification-slot">#dom-sensor-pendingreadingnotification-slot</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-pendingreadingnotification-slot">9.4. Deactivate a sensor object</a>
    <li><a href="#ref-for-dom-sensor-pendingreadingnotification-slot①">9.10. Report latest reading updated</a> <a href="#ref-for-dom-sensor-pendingreadingnotification-slot②">(2)</a> <a href="#ref-for-dom-sensor-pendingreadingnotification-slot③">(3)</a>
    <li><a href="#ref-for-dom-sensor-pendingreadingnotification-slot④">9.11. Notify new reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-identifyingparameters-slot">
   <b><a href="#dom-sensor-identifyingparameters-slot">#dom-sensor-identifyingparameters-slot</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-identifyingparameters-slot">9.1. Construct sensor object</a>
    <li><a href="#ref-for-dom-sensor-identifyingparameters-slot①">9.2. Connect to sensor</a> <a href="#ref-for-dom-sensor-identifyingparameters-slot②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensorerrorevent">
   <b><a href="#sensorerrorevent">#sensorerrorevent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensorerrorevent">9.13. Notify error</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensorerrorevent-error">
   <b><a href="#dom-sensorerrorevent-error">#dom-sensorerrorevent-error</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensorerrorevent-error">9.13. Notify error</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-sensorerroreventinit">
   <b><a href="#dictdef-sensorerroreventinit">#dictdef-sensorerroreventinit</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-sensorerroreventinit">8.2. The SensorErrorEvent Interface</a>
    <li><a href="#ref-for-dictdef-sensorerroreventinit①">8.2.1. SensorErrorEvent.error</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="connect-to-sensor">
   <b><a href="#connect-to-sensor">#connect-to-sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-connect-to-sensor">8.1.5. Sensor.start()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="activate-a-sensor-object">
   <b><a href="#activate-a-sensor-object">#activate-a-sensor-object</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-activate-a-sensor-object">8.1.5. Sensor.start()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="deactivate-a-sensor-object">
   <b><a href="#deactivate-a-sensor-object">#deactivate-a-sensor-object</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-deactivate-a-sensor-object">8.1.1. Sensor lifecycle</a>
    <li><a href="#ref-for-deactivate-a-sensor-object①">8.1.6. Sensor.stop()</a>
    <li><a href="#ref-for-deactivate-a-sensor-object②">9.5. Revoke sensor permission</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="revoke-sensor-permission">
   <b><a href="#revoke-sensor-permission">#revoke-sensor-permission</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-revoke-sensor-permission">7.1. Sensor Type</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="set-sensor-settings">
   <b><a href="#set-sensor-settings">#set-sensor-settings</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-sensor-settings">9.3. Activate a sensor object</a>
    <li><a href="#ref-for-set-sensor-settings①">9.4. Deactivate a sensor object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="update-latest-reading">
   <b><a href="#update-latest-reading">#update-latest-reading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-update-latest-reading">7.2. Sensor</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="security-check">
   <b><a href="#security-check">#security-check</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-security-check">5.2.3. Losing Focus</a>
    <li><a href="#ref-for-security-check①">5.2.4. Visibility State</a>
    <li><a href="#ref-for-security-check②">9.7. Update latest reading</a>
    <li><a href="#ref-for-security-check③">9.8. Security check</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="find-the-reporting-frequency-of-a-sensor-object">
   <b><a href="#find-the-reporting-frequency-of-a-sensor-object">#find-the-reporting-frequency-of-a-sensor-object</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-find-the-reporting-frequency-of-a-sensor-object">9.10. Report latest reading updated</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="report-latest-reading-updated">
   <b><a href="#report-latest-reading-updated">#report-latest-reading-updated</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-report-latest-reading-updated">9.7. Update latest reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="notify-new-reading">
   <b><a href="#notify-new-reading">#notify-new-reading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-notify-new-reading">9.10. Report latest reading updated</a> <a href="#ref-for-notify-new-reading①">(2)</a> <a href="#ref-for-notify-new-reading②">(3)</a> <a href="#ref-for-notify-new-reading③">(4)</a>
    <li><a href="#ref-for-notify-new-reading④">9.12. Notify activated state</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="notify-activated-state">
   <b><a href="#notify-activated-state">#notify-activated-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-notify-activated-state">9.3. Activate a sensor object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="notify-error">
   <b><a href="#notify-error">#notify-error</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-notify-error">8.1.5. Sensor.start()</a> <a href="#ref-for-notify-error①">(2)</a>
    <li><a href="#ref-for-notify-error②">9.5. Revoke sensor permission</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="get-value-from-latest-reading">
   <b><a href="#get-value-from-latest-reading">#get-value-from-latest-reading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-get-value-from-latest-reading">7.2. Sensor</a>
    <li><a href="#ref-for-get-value-from-latest-reading①">8.1.4. Sensor.timestamp</a>
    <li><a href="#ref-for-get-value-from-latest-reading②">10.6. Definition Requirements</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-sensor-access">
   <b><a href="#request-sensor-access">#request-sensor-access</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-sensor-access">8.1.5. Sensor.start()</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while(el.parentElement) {
                if(el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if(el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if(dfnPanel) {
                    console.log(dfnPanel);
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
        </script>