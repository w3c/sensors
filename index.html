<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <title>Generic Sensor API Pattern</title>
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common' async class='remove'></script>
    <script class='remove'>
        var respecConfig = {
            specStatus: "ED",
            shortName: "tbd",
            editors: [{
                name: "Rick Waldron",
                company: "jQuery Foundation",
                companyURL: "https://jquery.org/"
            },
            {
                name: "Tobie Langel",
                company: "Intel Corporation",
                companyURL: "http://intel.com/",
                w3cid: 78102
            }],
            wg: "Device APIs Group",
            wgURI: "http://www.w3.org/2009/dap/",
            wgPublicList: "public-device-apis",
            wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/43696/status",
            noRecTrack: true,
            edDraftURI: "https://w3c.github.io/sensors/",
            format: "markdown",
            noLegacyStyle: true,
            otherLinks: [{
                key: 'Repository',
                data: [{
                    value: 'We are on Github.',
                    href: 'https://github.com/w3c/sensors'
                }, {
                    value: 'Contributors',
                    href: 'https://github.com/w3c/sensors/graphs/contributors'
                }, {
                    value: 'File a bug.',
                    href: 'https://github.com/w3c/sensors/issues'
                }, {
                    value: 'Commit history.',
                    href: 'https://github.com/w3c/sensors/commits/gh-pages'
                }, {
                    value: 'Mailing list.',
                    href: 'https://lists.w3.org/Archives/Public/public-device-apis/'
                }]
            }],
            issueBase: "https://www.github.com/w3c/sensors/issues/",
            githubAPI: "https://api.github.com/repos/w3c/sensors"
        };
    </script>
  </head>
  <body>
<section id=abstract>
    This specification defines a framework for exposing sensor data to the Open Web Platform in a consistent way. It does so by defining a blueprint for writing specifications of concrete sensors along with an abstract Sensor interface that can be extended to accommodate different sensor types.
</section>

<section id=sotd>
</section>

<section id=conformance>
    Implementations that use ECMAScript to expose the APIs defined in this specification must implement them in a manner consistent with the ECMAScript Bindings defined in the Web IDL specification [[!WEBIDL]].
</section>

Use Cases
---------

<div class=issue data-number=12></div>

Security and privacy considerations
-----------------------------------

<div class=issue data-number=14></div>
<div class=issue data-number=20></div>


Dependencies
------------

The <a href="https://dom.spec.whatwg.org/#interface-eventtarget"><dfn>EventTarget</dfn></a> interface is defined in the DOM Standard [[!WHATWG-DOM]].

The <a href="http://dev.w3.org/html5/spec/webappapis.html#eventhandler"><dfn>EventHandler</dfn></a> interface represents callback used for event handlers as defined in the HTML5 specification [[!HTML5]].

The terms <a href="http://dev.w3.org/html5/spec/webappapis.html#event-handlers"><dfn>event handlers</dfn></a> and <a href="http://dev.w3.org/html5/spec/webappapis.html#event-handler-event-type"><dfn>event handler event types</dfn></a> are defined in the HTML5 specification [[!HTML5]].

<div class=issue data-number=21></div>

API
---

<div class=issue data-number=8></div>




### The <dfn>Sensor</dfn> Interface

<pre class="idl">
[Constructor(SensorInit sensorInitDict), Exposed=(Window,Worker)]
interface Sensor : EventTarget {
  static Promise&lt;sequence&lt;DOMString&gt;&gt; getAll();
  readonly attribute double frequency;
  readonly attribute SensorReading? value;
  attribute EventHandler onerror;
  attribute EventHandler onchange;
};

dictionary SensorInit {
  double? frequency;
  DOMString? identifier;
};
</pre>

#### <dfn>Sensor.getAll</dfn>

<div class=issue data-number=26></div>

Returns a promise which resolves to an array of DOMStrings representing the identifier of all available local sensors.

<div class=issue data-number=28></div>
<div class=issue data-number=7></div>

#### <dfn>Sensor.frequency</dfn>

<div class=issue data-number=4></div>
<div class=issue data-number=6></div>
<div class=issue data-number=23></div>

#### <dfn>Sensor.value</dfn>

<div class=issue data-number=2></div>
<div class=issue data-number=13></div>

#### <dfn>Sensor.onerror</dfn>

#### <dfn>Sensor.onchange</dfn>

#### Event handlers

The following are the <a>event handlers</a> (and their corresponding <a>event handler event types</a>) that MUST be supported as attributes by the objects implementing the <a>Sensor</a> interface:

<table class="simple">
  <thead>
    <tr>
      <th>event handler</th>
      <th>event handler event type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong><code>onchange</code></strong></td>
      <td><code>change</code></td>
    </tr>
    <tr>
      <td><strong><code>onerror</code></strong></td>
      <td><code>error</code></td>
    </tr>
  </tbody>
</table>

#### <dfn>SensorInit.treshold</dfn>

<div class=issue data-number=25></div>

#### <dfn>SensorInit.wakeup</dfn>

<div class=issue data-number=15></div>

### <dfn>SensorReading</dfn>

<pre class="idl">
interface SensorReading {
  readonly attribute DOMTimeStamp timestamp;
  readonly attribute DOMString sensorIdentifier;
};
</pre>

### <dfn>SensorReading.timestamp</dfn>

Returns the time at which the data was <a>read from the sensor</a> in the number of milliseconds that passed since 00:00:00 UTC on 1 January 1970.

### <dfn>SensorReading.sensorIdentifier</dfn>

Returns the identifier of the sensor the reading is taken from.

### Low level Sensor API

<div class=issue data-number=24></div>

Extensibility
-------------

The purpose of this section is to describe how this specification can be extended to specify concrete sensors.

It will feature precise steps on how to extend or inherit from interfaces described in this specification along with examples for two sensors, one which measures a single value and one which measures multiple ones.

<div class=issue data-number=22></div>

<section id=issue-summary></section>

<section id=acknowledgements>

Acknowledgements
----------------

The following people have greatly contributed to this specification through extensive discussions on GitHub: <span id=gh-commenters></span>.

We'd also like to thank <span id=gh-contributors></span> for their editorial input.

</section>

</body>
</html>
